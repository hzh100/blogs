<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>内管前端方案 | blog</title>
    <meta name="description" content="vue、js、nodejs等等的学习记录">
    <link rel="stylesheet" href="/assets/style.49eed234.css">
    <link rel="modulepreload" href="/assets/Home.ae65bc00.js">
    <link rel="modulepreload" href="/assets/app.d95e124d.js">
    <link rel="modulepreload" href="/assets/innermanage_内管前端工程.md.2e5b87fc.lean.js">
    
    <meta name="twitter:title" content="内管前端方案 | blog">
  <meta property="og:title" content="内管前端方案 | blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="blog, back to home" data-v-675d8756 data-v-cc01ef16><!----> blog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"> 介绍</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/">介绍</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">http</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http2">http2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http3">http3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http缓存">http缓存</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">innermanage</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/innermanage/内管前端工程">内管前端工程</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#内管前端方案">内管前端方案</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#多页iframe">多页iframe</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#多应用iframe">多应用iframe</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#单页router">单页router</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#单页">单页</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#iframe内嵌内管框架设计">iframe内嵌内管框架设计</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#react-官网为什么那么快？">React 官网为什么那么快？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#静态站点生成ssg">静态站点生成SSG</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#link标签preload">link标签preload</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#prefetch">prefetch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#preconnect">preconnect</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#dns-prefetch">dns-prefetch</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#astro">Astro</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#islands架构模型">Islands架构模型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#snowpack">Snowpack</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#skypack">Skypack</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#bundless">Bundless</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#esbuild">Esbuild</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">interview</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/JS基础">JS基础</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/TODO">TODO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/前端面试之道">前端面试之道</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/各种题目01">各种题目01</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-callbind">手写系列-callbind</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-instanceof">手写系列-instanceof</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-map和filter和reduce">手写系列-map和filter和reduce</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-new原理">手写系列-new原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-setTime模拟setInterval">手写系列-setTime模拟setInterval</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-发布订阅和观察者">手写系列-发布订阅和观察者</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂axios">手写系列-复杂axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂promise">手写系列-复杂promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-数组转树">手写系列-数组转树</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-深拷贝">手写系列-深拷贝</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-防抖节流">手写系列-防抖节流</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/算法01">算法01</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">jiagou</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/monorepo">monorepo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/从0到1构建符合标准的公共库">从0到1构建符合标准的公共库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/切换主题方案">切换主题方案</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/前端基础建设与架构30讲">前端基础建设与架构30讲</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/搭建组件库">搭建组件库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/自动生成按需导出目录">自动生成按需导出目录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/表单组件带校验功能">表单组件带校验功能</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/js/class和构造函数">class和构造函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/dayFormat正则的使用">dayFormat正则的使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/luhn算法">luhn算法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/Object.entries">Object.entries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/proxy">proxy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/优雅的Class">优雅的Class</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/前端模块化">前端模块化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/浏览器垃圾回收">浏览器垃圾回收</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/闭包与垃圾回收">闭包与垃圾回收</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">microFrontend</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/介绍">介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/拟定微前端架构设计">拟定微前端架构设计</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/架构思想">架构思想</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">node</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cheetah-learn">cheetah-learn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cli相关学习">cli相关学习</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">performance</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/serviceWorker">serviceWorker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/ssr">ssr</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/慕课网web性能优化">慕课网web性能优化</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">typescript</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript/vue2加ts">vue2加ts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/create-vue脚手架">create-vue脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/esbuild使用">esbuild使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/keep-alive原理">keep-alive原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/vue-router实现原理">vue-router实现原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/模板编译">模板编译</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/路由页面历史栈的处理">路由页面历史栈的处理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-01模板语法">重学vue-01模板语法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-02数据驱动视图">重学vue-02数据驱动视图</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-03render函数">重学vue-03render函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-04内置指令">重学vue-04内置指令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-05filter多余吗">重学vue-05filter多余吗</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-06computer">重学vue-06computer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-07watch">重学vue-07watch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-08组件">重学vue-08组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-09生命周期">重学vue-09生命周期</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-10ref是什么">重学vue-10ref是什么</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-11nextTick">重学vue-11nextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-8组件通信">重学vue-8组件通信</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-vue.use">重学vue-vue.use</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-动画内置组件">重学vue-动画内置组件</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue3</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/elementPlus">elementPlus</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/入门">入门</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webComponents</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/1. webComponent介绍">1. webComponent介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/2. customElements">2. customElements</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webpack</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/1">1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/实现一个自己的脚手架">实现一个自己的脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-01打包工具的思考">重学webpack-01打包工具的思考</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-02模块化原理">重学webpack-02模块化原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-03loader">重学webpack-03loader</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-04plugin">重学webpack-04plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-05HMR热更新">重学webpack-05HMR热更新</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">week</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-1">202110-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-2">202110-2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202111-1">202111-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/缓存工具方法思路">缓存工具方法思路</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">work</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/work/ios小白条问题">ios小白条问题</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h2 id="内管前端方案" tabindex="-1">内管前端方案 <a class="header-anchor" href="#内管前端方案" aria-hidden="true">#</a></h2><h3 id="多页iframe" tabindex="-1">多页iframe <a class="header-anchor" href="#多页iframe" aria-hidden="true">#</a></h3><h3 id="多应用iframe" tabindex="-1">多应用iframe <a class="header-anchor" href="#多应用iframe" aria-hidden="true">#</a></h3><h3 id="单页router" tabindex="-1">单页router <a class="header-anchor" href="#单页router" aria-hidden="true">#</a></h3><p>单页的难点是多开tab，难处理</p><h3 id="单页" tabindex="-1">单页 <a class="header-anchor" href="#单页" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;babel-polyfill&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;element-ui/lib/theme-chalk/index.css&#39;</span>
<span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">&#39;element-ui&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span>

window<span class="token punctuation">.</span>Vue <span class="token operator">=</span> Vue
window<span class="token punctuation">.</span>Vuex <span class="token operator">=</span> Vuex
window<span class="token punctuation">.</span>VueRouter <span class="token operator">=</span> VueRouter
window<span class="token punctuation">.</span>ElementUI <span class="token operator">=</span> ElementUI
</code></pre></div><h2 id="iframe内嵌内管框架设计" tabindex="-1">iframe内嵌内管框架设计 <a class="header-anchor" href="#iframe内嵌内管框架设计" aria-hidden="true">#</a></h2><ul><li>cdn共享js资源，子应用按需引入主应用资源 <ul><li>主应用资源拆分存储</li><li>子应用按需引入</li></ul></li></ul><p>微前端形式嵌入，需要子应用配合前端(提供npm依赖引入直接支持？)，在这里不现实，因此还是iframe</p><p>抽离一个独立层用作，子应用调用主应用方法或store仓库mutation</p><p>​​iframe形式组合内管应用</p><ul><li><p>stone是个脚手架？我们如果作为子应用需要拉取stone代码？</p></li><li><p>还是我们要用stone搭建一个内管系统</p></li><li><p>接入的目标系统(主应用)是什么，长什么样</p></li><li><p>iframe的登录态可以共享吗</p></li><li><p>页面通信，父子通信，子父通信</p><ul><li>子父通信场景 <ul><li>登录超时处理，子应用让父应用退出登录</li></ul></li><li>父子通信场景7</li><li>兄弟通信，列表数据删除数据，详情操作</li></ul></li><li><p>路由跳转-iframe内部跳转其他菜单，二级页面将不能通过浏览器前进后退，必须在二级页面提供返回按钮</p></li><li><p>状态共享-全局变量配置字典参数资源前缀、登录token等（除非完全独立，不然每次都要子应用获取数据，并且每接入一个子应用就要明确哪些全局的东西要自己处理</p><ul><li>local session的内存是否可以共享，同域还是不同域</li><li>必须同域</li></ul></li><li><p>弹框遮罩UI风格</p></li></ul><p>开发-独立部署、调试</p><ul><li>iframe跨域问题，子应用需要允许跨域</li><li>主应用：通过路径打开页面，可以通过‘<a href="http://xn--tiq711bp5q.com/iframe?src=%22mypage%22" target="_blank" rel="noopener noreferrer">主应用.com/iframe?src=&quot;mypage&quot;</a> ’ ，打开</li><li>主应用： 支持多开相同url，不同hash的单页面，并且彼此不会影响</li></ul><h2 id="react-官网为什么那么快？" tabindex="-1">React 官网为什么那么快？ <a class="header-anchor" href="#react-官网为什么那么快？" aria-hidden="true">#</a></h2><h3 id="静态站点生成ssg" tabindex="-1">静态站点生成SSG <a class="header-anchor" href="#静态站点生成ssg" aria-hidden="true">#</a></h3><p>🤔思考: 和服务端渲染SSR的区别 都是服务端渲染html，不需要js运行时插入及渲染dom</p><ul><li>SSG是在构建时生成html内容 <ul><li>适用于不同权限的人进入会是不同内容的html</li></ul></li><li>SSR是在静态资源请求时，静态资源服务器运行时生成html内容 <ul><li>仅适用于博客、官网、文档等静态页面</li><li>那为什么不用solidjs？？？</li></ul></li></ul><h3 id="link标签preload" tabindex="-1">link标签preload <a class="header-anchor" href="#link标签preload" aria-hidden="true">#</a></h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/webpack-runtime-732352b70a6d0733ac95.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以加载一些必备的cdn资源 vue这种框架资源就不是preload的东西 比如qrcode是常用功能，则可以preload这个资源 或是图片、音视频等</p><h3 id="prefetch" tabindex="-1">prefetch <a class="header-anchor" href="#prefetch" aria-hidden="true">#</a></h3><p>思考🤔: preload和prefetch的区别 一个是数据一个是资源吧</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/page-data/docs/getting-started.html/page-data.json<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anonymous<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fetch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>监听dom进入视图或是监听鼠标hover时preload/prefetch</p><h3 id="preconnect" tabindex="-1">preconnect <a class="header-anchor" href="#preconnect" aria-hidden="true">#</a></h3><p>在后面的js代码中可能会去请求这个域名下对应的资源，你可以先去把网络连接建立好，到时候发送对应请求时也就更加快速</p><blockquote><p>元素属性的关键字preconnect是提示浏览器用户可能需要来自目标域名的资源，因此浏览器可以通过抢先启动与该域名的连接来改善用户体验 —— MDN</p></blockquote><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preconnect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.google-analytics.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="dns-prefetch" tabindex="-1">dns-prefetch <a class="header-anchor" href="#dns-prefetch" aria-hidden="true">#</a></h3><blockquote><p>DNS-prefetch (DNS 预获取) 是尝试在请求资源之前解析域名。这可能是后面要加载的文件，也可能是用户尝试打开的链接目标 —— MDN</p></blockquote><p>多域名后端场景可以提前连接，减少DNS查询耗时</p><p>dns-prefetch 的作用就是告诉浏览器在给第三方服务器发送请求之前去把指定域名的解析工作给做了，这个优化方法一般会和上面的preconnect一起使用，这些都是性能优化的一些手段，我们也可以在自己项目中合适的地方来使用</p><p>思考🤔: dns-prefetch和preconnet的区别</p><p>Gatsby 在打包的时候就生成了所有页面对应的 HTML文件以及数据文件等，这样当你访问某个页面时，服务端可以直接返回HTML ，另外一方面当页面中有使用 Link 时，会提前加载这个页面所对应的数据，这样点击跳转后页面加载速度就会很快</p><p>研究这个打包脚本的做法</p><h2 id="astro" tabindex="-1">Astro <a class="header-anchor" href="#astro" aria-hidden="true">#</a></h2><p>​ Astro 仓库的工程搭建相关(changesets 自动发包)</p><p>content-focused 应用开发框架，就是重内容、轻交互场景下的上层研发框架，比如大多数电商网站、文档站、博客站、证券网站等等</p><p>这种用不含虚拟DOM的solidjs框架(SSG)，性能已经可以优化到很好了吧</p><p>Astro能带来什么</p><ul><li>Islands 架构，解决传统 SSR/SSG 框架的全量 hydration 注水 问题？，做到尽可能少的 Client 端 JS 的开销，甚至是 0 JS。</li><li>使用灵活。对于页面的开发，你既可以使用官方的.astro 语法，也同样可以使用 .md、.vue、.jsx 语法，也就是说，你可以自由选择其它前端框架的语法来开发，甚至可以在一个项目中同时写 Vue 组件和 React 组件！</li><li>构建迅速。底层构建体系基于 Vite 以及 Esbuild 实现，项目启动速度非常快。</li></ul><h2 id="islands架构模型" tabindex="-1">Islands架构模型 <a class="header-anchor" href="#islands架构模型" aria-hidden="true">#</a></h2><p>主要用于 SSR (也包括 SSG) 应用 在传统的 SSR 应用中，服务端会给浏览器响应完整的 HTML 内容，并在 HTML 中注入一段完整的 JS 脚本用于完成事件的绑定，也就是完成 hydration (注水) 的过程 当注水的过程完成之后，页面也才能真正地能够进行交互</p><p>那么当应用的体积逐渐增大时，需要在客户端执行的 JS 脚本也会越来越多，这也意味着 TTI(可交互时间) 指标越来越高 🤔 应用体积增大，服务端计算组装html和js耗时长，注入的js和html体积大而已吧，为什么说客户端执行的JS越来越多？js是注入挂载而已吧，并不会执行</p><p>🤔 注水发生在服务端吗？</p><p>Islands模型，是指SSR/SSG 渲染出一个页面，把页面内容分为可交互组件和静态组件(前提是组件之间是独立的) 静态组件，可以不参与 hydration (注水) 直接复用服务端下发的 HTML 内容？ 🤔 传统SSR/SSG 是全量注水？注水到底是怎么样的过程 🤔 这不是跟vue3 优化虚拟DOM的diff算法一个思路吗？标记静态DOM和动态DOM</p><p>这样一个页面的可交互组件，就像是孤岛一样，并不是整个页面都是可交互组件，因此取名 Islands</p><p>简单的说 Islands 架构实现局部注水 hydration 功能,从而与哦话Js的体积，减少网络传输的成本，和js运行时的开销？</p><p>🤔 注水的js运行时到底是什么？</p><p>👇 astro 手动标记 可交互组件</p><div class="language-js"><pre><code><span class="token comment">// index.astro</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">import</span> MyReactComponent <span class="token keyword">from</span> <span class="token string">&#39;../components/MyReactComponent.jsx&#39;</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">&lt;</span>MyReactComponent client<span class="token operator">:</span>load <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>如此一来，Astro 会给浏览器传输一部分 JS 代码供这个组件完成 hydration，以便后续的交互。</p><p>各框架的SSR/SSG方案应该都有优化为按需注水的功能 如 React18 的 <code>Selection Hydration</code>，从最终效果来看确实是同一个东西</p><p>但是Astro的优势在于</p><ul><li>框架无关</li><li>不需要全量加载和执行JS</li><li>不依赖流式渲染 <code>transfer-encodeing: chunked</code> 响应头?🤔 啥？</li></ul><h2 id="snowpack" tabindex="-1">Snowpack <a class="header-anchor" href="#snowpack" aria-hidden="true">#</a></h2><p>利用esm实现的bundless的 Snowpack 后不再维护转向vite vite也是参考了Snowpack 因此可以学习一下原理和vite对比的缺点</p><h2 id="skypack" tabindex="-1">Skypack <a class="header-anchor" href="#skypack" aria-hidden="true">#</a></h2><p>利用esm的CDN服务 Skypack 后也有点不维护了 竞品是 <a href="http://esm.sh" target="_blank" rel="noopener noreferrer">esm.sh</a></p><h2 id="bundless" tabindex="-1">Bundless <a class="header-anchor" href="#bundless" aria-hidden="true">#</a></h2><p>no bundle 构建</p><ul><li>build阶段 弱化业务代码打包的概念，不为了减少http请求而把资源集成打到1个包里(基于http2、3的发展,多路复用和好的http缓存策略)</li><li>dev阶段 按需编译，减少热更新的开销等</li><li>build阶段 依赖打包，改为 <ul><li>预打包+模块化缓存（vite 基于Esbuild 的预打包器）🤔 就是先打一个不会变的公共静态包</li><li>基于ESM的CDN服务（Skypack、<a href="http://esm.sh" target="_blank" rel="noopener noreferrer">esm.sh</a>、jspm</li></ul></li></ul><p>vite</p><p>dev阶段的按需构建 基于Esbuild 入口js为<code>&lt;script type=&quot;module&quot;&gt;</code> ,入口js 来通过本地node服务 import 进各种资源，再深度引入</p><p>这样实现按需编译，而不需要预bundle后运行的时间，这样缩短了启动项目的编译时间，但是运行项目的按需编译会相对较长</p><ul><li>但仍然需要进行单文件的编译(如 TS、JSX、Less、Sass)，编译的时长仍然可能会比较长(某些业务项目编译要 20 s 左右)。</li><li>Vite 在二次请求时会采用 Etag 标识返回协商缓存的内容，可以跳过编译消耗的时间，但服务重启后仍然需要进行全量的编译，体验不太好。 <ul><li>解决方法是在服务退出时将 ModuleGraph 的内容缓存到本地，然后重启的时候激活缓存(hydrate)，那么二次启动时仍然会使用协商缓存，达到比较快的首屏加载效果。</li><li>本地缓存在 Vite 中暂时还没有被完全实现，但也是未来的一个优化方向。<a href="https://github.com/vitejs/vite/issues/1309" target="_blank" rel="noopener noreferrer">https://github.com/vitejs/vite/issues/1309</a></li></ul></li></ul><p>除了本地缓存也可以利用 serviceworker</p><p>build阶段 使用Rollup打包</p><p>2者的差距，通过node服务 mock Rollup 的各种loader plugin 来磨平</p><h2 id="esbuild" tabindex="-1">Esbuild <a class="header-anchor" href="#esbuild" aria-hidden="true">#</a></h2><p>138/in_lb/xx.do</p><p>138/in_lb - 后端 138/in_lb/api/v1</p><p>sso 138/api/v1 -stone 138/in_lb -猎豹接口</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/http/http缓存" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>http缓存</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/interview/JS基础" data-v-38ede35f><span class="text" data-v-38ede35f>JS基础</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"http_http2.md\":\"61f372f8\",\"http_http3.md\":\"f4eae4a7\",\"http_http缓存.md\":\"90dfc416\",\"index.md\":\"7cd664a4\",\"innermanage_内管前端工程.md\":\"2e5b87fc\",\"interview_js基础.md\":\"f3b76f1b\",\"interview_todo.md\":\"a4bea80d\",\"interview__过.md\":\"ad46898e\",\"interview_前端面试之道.md\":\"29e10a7b\",\"interview_各种题目01.md\":\"336c3f0f\",\"interview_手写系列-callbind.md\":\"1a27c36e\",\"interview_手写系列-instanceof.md\":\"5a89338b\",\"interview_手写系列-map和filter和reduce.md\":\"4b19ddd8\",\"interview_手写系列-new原理.md\":\"bb803aa9\",\"interview_手写系列-settime模拟setinterval.md\":\"f315b518\",\"interview_手写系列-发布订阅和观察者.md\":\"f6b28385\",\"interview_手写系列-复杂axios.md\":\"fafdf239\",\"interview_手写系列-复杂promise.md\":\"41f7e308\",\"interview_手写系列-数组转树.md\":\"75c9efc8\",\"interview_手写系列-深拷贝.md\":\"3d378cc3\",\"interview_手写系列-防抖节流.md\":\"621af863\",\"interview_算法01.md\":\"d9c4b61a\",\"jiagou_monorepo.md\":\"725693ea\",\"jiagou_从0到1构建符合标准的公共库.md\":\"4db26899\",\"jiagou_切换主题方案.md\":\"1c6f7cc6\",\"jiagou_前端基础建设与架构30讲.md\":\"545c2f4d\",\"jiagou_搭建组件库.md\":\"75b6105a\",\"jiagou_深入babel.md\":\"98134c12\",\"jiagou_自动生成按需导出目录.md\":\"a0a99e5b\",\"jiagou_表单组件带校验功能.md\":\"037e52c3\",\"js_object.entries.md\":\"d7ef83a2\",\"js_class和构造函数.md\":\"e1c68545\",\"js_dayformat正则的使用.md\":\"da3c8fb2\",\"js_luhn算法.md\":\"1a42337b\",\"js_proxy.md\":\"6ff1ec19\",\"js_优雅的class.md\":\"3df6be82\",\"js_前端模块化.md\":\"9e7f6ead\",\"js_浏览器垃圾回收.md\":\"e21a3e55\",\"js_深入babel.md\":\"52722ee7\",\"js_闭包与垃圾回收.md\":\"749b2ff1\",\"microfrontend_介绍.md\":\"580a3921\",\"microfrontend_拟定微前端架构设计.md\":\"ff7f9528\",\"microfrontend_架构思想.md\":\"08afff96\",\"node_cheetah-learn.md\":\"03f4cd07\",\"node_cli相关学习.md\":\"5b8b30ed\",\"performance_serviceworker.md\":\"8daffe4c\",\"performance_ssr.md\":\"a4ce6081\",\"performance_慕课网web性能优化.md\":\"b9f642c2\",\"typescript_vue2加ts.md\":\"4dfc1521\",\"vue_create-vue脚手架.md\":\"0eba574d\",\"vue_esbuild使用.md\":\"e068bb0d\",\"vue_keep-alive原理.md\":\"44c46c5f\",\"vue_vue-router实现原理.md\":\"1d2621c4\",\"vue_模板编译.md\":\"482e2dc9\",\"vue_路由页面历史栈的处理.md\":\"f827e2a6\",\"vue_重学vue-01模板语法.md\":\"69d88a08\",\"vue_重学vue-02数据驱动视图.md\":\"c681bf73\",\"vue_重学vue-03render函数.md\":\"477b8cdc\",\"vue_重学vue-04内置指令.md\":\"d05b23f6\",\"vue_重学vue-05filter多余吗.md\":\"583eb11a\",\"vue_重学vue-06computer.md\":\"2085b276\",\"vue_重学vue-07watch.md\":\"915b128f\",\"vue_重学vue-08组件.md\":\"1a9f134f\",\"vue_重学vue-09生命周期.md\":\"a715abeb\",\"vue_重学vue-10ref是什么.md\":\"8043a67e\",\"vue_重学vue-11nexttick.md\":\"c1eba6cc\",\"vue_重学vue-8组件通信.md\":\"fe312913\",\"vue_重学vue-vue.use.md\":\"2adddb6d\",\"vue_重学vue-动画内置组件.md\":\"f35266d9\",\"vue3_elementplus.md\":\"474cd264\",\"vue3_入门.md\":\"3cbb2de8\",\"webcomponents_1. webcomponent介绍.md\":\"6dd880b3\",\"webcomponents_2. customelements.md\":\"e890e63a\",\"webpack_1.md\":\"19710796\",\"webpack__草稿.md\":\"a4521525\",\"webpack_实现一个自己的脚手架.md\":\"3a0dcb1e\",\"webpack_重学webpack-01打包工具的思考.md\":\"dc8f4b90\",\"webpack_重学webpack-02模块化原理.md\":\"be9e501e\",\"webpack_重学webpack-03loader.md\":\"34f09632\",\"webpack_重学webpack-04plugin.md\":\"bc5707c3\",\"webpack_重学webpack-05hmr热更新.md\":\"9368db44\",\"week_202110-1.md\":\"66b9ab24\",\"week_202110-2.md\":\"5bcee2e2\",\"week_202111-1.md\":\"72fb7b6d\",\"week__0todo.md\":\"271b539a\",\"week_缓存工具方法思路.md\":\"fdb57aa6\",\"work_ios小白条问题.md\":\"5d8a3aac\"}")</script>
    <script type="module" async src="/assets/app.d95e124d.js"></script>
    
  </body>
</html>