<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>proxy简介 | blog</title>
    <meta name="description" content="vue、js、nodejs等等的学习记录">
    <link rel="stylesheet" href="/assets/style.49eed234.css">
    <link rel="modulepreload" href="/assets/Home.ae65bc00.js">
    <link rel="modulepreload" href="/assets/app.d95e124d.js">
    <link rel="modulepreload" href="/assets/js_proxy.md.6ff1ec19.lean.js">
    
    <meta name="twitter:title" content="proxy简介 | blog">
  <meta property="og:title" content="proxy简介 | blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="blog, back to home" data-v-675d8756 data-v-cc01ef16><!----> blog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"> 介绍</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/">介绍</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">http</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http2">http2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http3">http3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http缓存">http缓存</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">innermanage</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/innermanage/内管前端工程">内管前端工程</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">interview</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/JS基础">JS基础</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/TODO">TODO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/前端面试之道">前端面试之道</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/各种题目01">各种题目01</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-callbind">手写系列-callbind</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-instanceof">手写系列-instanceof</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-map和filter和reduce">手写系列-map和filter和reduce</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-new原理">手写系列-new原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-setTime模拟setInterval">手写系列-setTime模拟setInterval</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-发布订阅和观察者">手写系列-发布订阅和观察者</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂axios">手写系列-复杂axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂promise">手写系列-复杂promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-数组转树">手写系列-数组转树</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-深拷贝">手写系列-深拷贝</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-防抖节流">手写系列-防抖节流</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/算法01">算法01</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">jiagou</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/monorepo">monorepo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/从0到1构建符合标准的公共库">从0到1构建符合标准的公共库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/切换主题方案">切换主题方案</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/前端基础建设与架构30讲">前端基础建设与架构30讲</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/搭建组件库">搭建组件库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/自动生成按需导出目录">自动生成按需导出目录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/表单组件带校验功能">表单组件带校验功能</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/js/class和构造函数">class和构造函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/dayFormat正则的使用">dayFormat正则的使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/luhn算法">luhn算法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/Object.entries">Object.entries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/js/proxy">proxy</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#proxy简介">proxy简介</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#数据双向绑定示例">数据双向绑定示例</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#基于proxy实现数据双向绑定">基于Proxy实现数据双向绑定</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-实现基础get、set代理">1. 实现基础get、set代理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-set时触发订阅者的回调">2. set时触发订阅者的回调</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-set匹配到相应的回调来触发">3. set匹配到相应的回调来触发</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-深度proxy">4. 深度proxy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-优化深度代理">5. 优化深度代理</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#结合dom的reactive案例">结合dom的reactive案例</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-input双向数据绑定（v-model）">1. input双向数据绑定（v-model）</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-拖拽取色值">2. 拖拽取色值</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#参考资料">参考资料</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/优雅的Class">优雅的Class</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/前端模块化">前端模块化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/浏览器垃圾回收">浏览器垃圾回收</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/闭包与垃圾回收">闭包与垃圾回收</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">microFrontend</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/介绍">介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/拟定微前端架构设计">拟定微前端架构设计</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/架构思想">架构思想</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">node</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cheetah-learn">cheetah-learn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cli相关学习">cli相关学习</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">performance</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/serviceWorker">serviceWorker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/ssr">ssr</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/慕课网web性能优化">慕课网web性能优化</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">typescript</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript/vue2加ts">vue2加ts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/create-vue脚手架">create-vue脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/esbuild使用">esbuild使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/keep-alive原理">keep-alive原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/vue-router实现原理">vue-router实现原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/模板编译">模板编译</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/路由页面历史栈的处理">路由页面历史栈的处理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-01模板语法">重学vue-01模板语法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-02数据驱动视图">重学vue-02数据驱动视图</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-03render函数">重学vue-03render函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-04内置指令">重学vue-04内置指令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-05filter多余吗">重学vue-05filter多余吗</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-06computer">重学vue-06computer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-07watch">重学vue-07watch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-08组件">重学vue-08组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-09生命周期">重学vue-09生命周期</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-10ref是什么">重学vue-10ref是什么</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-11nextTick">重学vue-11nextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-8组件通信">重学vue-8组件通信</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-vue.use">重学vue-vue.use</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-动画内置组件">重学vue-动画内置组件</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue3</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/elementPlus">elementPlus</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/入门">入门</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webComponents</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/1. webComponent介绍">1. webComponent介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/2. customElements">2. customElements</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webpack</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/1">1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/实现一个自己的脚手架">实现一个自己的脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-01打包工具的思考">重学webpack-01打包工具的思考</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-02模块化原理">重学webpack-02模块化原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-03loader">重学webpack-03loader</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-04plugin">重学webpack-04plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-05HMR热更新">重学webpack-05HMR热更新</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">week</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-1">202110-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-2">202110-2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202111-1">202111-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/缓存工具方法思路">缓存工具方法思路</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">work</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/work/ios小白条问题">ios小白条问题</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h2 id="proxy简介" tabindex="-1">proxy简介 <a class="header-anchor" href="#proxy简介" aria-hidden="true">#</a></h2><blockquote><p>只做简到不能再简的简介，详细用法请查阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">MDN</a>和<a href="https://es6.ruanyifeng.com/#docs/proxy" target="_blank" rel="noopener noreferrer">阮一峰ES6</a></p><p><code>proxy</code> 一般用于库的封装设计，非必要不建议用在业务代码里，因为它会彻底改变数据的行为，很反常识</p></blockquote><div class="language-js"><pre><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>控制台执行</p><ul><li><code>obj.a</code> 输出 1 不打印</li><li><code>proxy.a</code> 打印内容并输出 1</li><li><code>Object.defineProperty(proxy, &quot;a&quot;, {value:10})</code> 打印函数的参数</li></ul><p>这里可以看出原对象的 <code>get</code> 不会走进 <code>proxy</code> 因此，我们也可以把 <code>proxy</code> 不理解成代理,而是当作一个完全自定义的对象或者类或者工具库</p><p><code>proxy</code> 的使用方式和 <code>promise</code> 类似</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>很少像示例那样直接 <code>new proxy</code> 后赋值给个变量</p><h2 id="数据双向绑定示例" tabindex="-1">数据双向绑定示例 <a class="header-anchor" href="#数据双向绑定示例" aria-hidden="true">#</a></h2><p><strong>React</strong></p><div class="language-js"><pre><code><span class="token comment">// 数据</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reactive()</span>

<span class="token comment">// 观测变化 需要手动声明依赖(手动声明这个回调对应什么的ey)</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;count changed&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 触发 console.log(&#39;count changed&#39;, data.count) 重新执行</span>
<span class="token comment">// 手动通过工具触发修改值，而不是直接修改</span>
<span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Vue3</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定义一个代理后的数据</span>

<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;count changed&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定义回调，代理数据变化时触发</span>

data<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 修改代理后的值</span>
</code></pre></div><p>👆 我们可以看到 <code>vue3</code> 相比于 <code>vue2</code>，需要手动把期望响应式的数据放到 <code>reactive</code> 里</p><p><code>vue3</code> 相比于 <code>reactive</code> ，又简化了很多步骤，甚至像个无法理解的黑盒</p><h2 id="基于proxy实现数据双向绑定" tabindex="-1">基于Proxy实现数据双向绑定 <a class="header-anchor" href="#基于proxy实现数据双向绑定" aria-hidden="true">#</a></h2><p>需要实现的效果如👇</p><div class="language-js"><pre><code><span class="token keyword">let</span> dummy<span class="token punctuation">;</span> <span class="token comment">// 假数据</span>
<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定义一个代理后的数据</span>
<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>dummy <span class="token operator">=</span> counter<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定义回调，代理数据变化时触发</span>
<span class="token comment">// dummy = counter.num; // 直接赋值的形式不会双向绑定</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
counter<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// 修改代理后的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
</code></pre></div><h3 id="_1-实现基础get、set代理" tabindex="-1">1. 实现基础get、set代理 <a class="header-anchor" href="#_1-实现基础get、set代理" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dummy<span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发get&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发set&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> myData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 原数据</span>
  <span class="token keyword">const</span> proxyData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>myData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 代理后数据</span>
  <span class="token comment">// 因为代理的get和set处理好了 修改原对象和修改代理对象 再访问原对象或者代理对象都能是新的值</span>
  dummy <span class="token operator">=</span> proxyData<span class="token punctuation">.</span>num<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
  proxyData<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👆 代理后的数据赋值给 <code>dummy</code>，<code>dummy</code> 不会随着代理数据变化而变化</p><blockquote><p>但是使用数据的时候使用代理对象不就好了吗，为什么要赋值出来使用 看起操作的数据是外层的，不用关心数据是不是在代理对象里层？</p></blockquote><h3 id="_2-set时触发订阅者的回调" tabindex="-1">2. set时触发订阅者的回调 <a class="header-anchor" href="#_2-set时触发订阅者的回调" aria-hidden="true">#</a></h3><p>要实现修改代理对象数据,能通知到赋值的变量,也就是 <code>set</code> 的时候再触发一次赋值(回调) 因此赋值操作需要立即执行一次，以及传递到 <code>set</code> 的回调时执行一次，用 <code>effect</code> 封装起来</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dummy<span class="token punctuation">;</span>
  <span class="token keyword">const</span> callbackList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发get&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发set&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
        callbackList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newVal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> myData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 原数据</span>
  <span class="token keyword">const</span> proxyData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>myData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 代理后数据</span>

  <span class="token keyword">function</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1. 立即执行一次</span>
    callbackList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2. 传递给set的时候执行一次</span>
    <span class="token comment">// 因为代理整个对象所以需要多个不同观察者，存储层数组，在set的时候全部执行(性能浪费)</span>
  <span class="token punctuation">}</span>

  <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>dummy <span class="token operator">=</span> proxyData<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发立即执行回调中赋值的get</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 不触发proxy的get set</span>
  proxyData<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 触发set 和回调中的赋值的get</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 不触发proxy的get set</span>
  <span class="token comment">/* effect(()=&gt;{
      console.log(&#39;触发num的回调&#39;);
      dummy = proxyData.num
  }); // 触发立即执行回调中赋值的get
  effect( ()=&gt;{
      console.log(&#39;触发num2的回调&#39;)
      dummy2 = proxyData.num2
  } ); // 触发立即执行回调中赋值的get
  console.log(dummy); // 1 不触发proxy的get set
  proxyData.num = 2; // 触发set 和回调中的赋值的get
  proxyData.num2 = 2; // 触发set 和回调中的赋值的get
  console.log(dummy); // 2 不触发proxy的get set*/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👆 假如代理多个 <code>reactive</code> 对象，每个对象中多个属性，都共用一个 <code>callback</code> 列表，并且在 <code>set</code> 时触发所有的回调，性能浪费</p><p>理想状态是，<code>set</code> 具体的 <code>reactive</code> 对象的具体 <code>key</code> 触发相应的回调</p><h3 id="_3-set匹配到相应的回调来触发" tabindex="-1">3. set匹配到相应的回调来触发 <a class="header-anchor" href="#_3-set匹配到相应的回调来触发" aria-hidden="true">#</a></h3><p>我们看到现在收集回调的地方，是在立即执行时存起来，只要想办法不是单纯的往回调列表中 <code>push</code> 而是存储对象 <code>key value</code>，即可在 <code>set</code> 的时候调用相应的回调 但是回调函数是没有明显的 <code>key</code> 给我们定义的</p><p>因为要定位到是哪个 <code>reactive</code> 对象和 <code>key</code>，因此理想的<code>回调map数据结构</code>如下</p><div class="language-js"><pre><code><span class="token keyword">const</span> callbackMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span> originObj1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span>key1<span class="token operator">:</span> callbackList<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>key2<span class="token operator">:</span> callbackList<span class="token punctuation">]</span> <span class="token operator">...</span>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span> originObj2<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span>key1<span class="token operator">:</span> callbackList<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>key2<span class="token operator">:</span> callbackList<span class="token punctuation">]</span> <span class="token operator">...</span>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>我们再看一下整个流程，不想污染外部，又不想在外部额外调用工具来存储回调，发现只有 <code>proxy</code> 内部可以获取到 <code>originObj</code> 和 <code>key</code></p><p>那我们利用立即执行回调时，触发 <code>get</code> 的时机，存储回调 (有点类似 vue2 的 <code>computed</code>，依赖到的变量才会触发收集) 在立即执行触发的 <code>get</code> 里，可以初始化出回调 <code>map</code> 的数据结构 但是回调函数在 <code>effect</code> 里，此时没有 <code>originObj</code> 和 <code>key</code> ，即使已经初始化好回调 <code>map</code> 数据结构，也无法往对应的地方存储回调函数</p><p>所以外加一个临时变量存储立即执行触发的 <code>get</code> 对应的回调 <code>map</code> 数据结构中的回调列表，这样在 <code>effect</code> 里就可以往临时变量里存回调了 而在 <code>set</code> 的时候根据 <code>key</code> 获取回调 <code>map</code> 中对应的回调执行即可</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dummy<span class="token punctuation">;</span>
  <span class="token keyword">const</span> callbackMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> tempCallbackList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 临时变量 立即执行的回调之后获取的对应的回调列表</span>

  <span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发get&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          callbackMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        tempCallbackList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发set&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
        callbackMap
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newVal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> myData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 原数据</span>
  <span class="token keyword">const</span> proxyData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>myData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 代理后数据</span>

  <span class="token keyword">function</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tempCallbackList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1. 立即执行一次</span>
    tempCallbackList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>dummy <span class="token operator">=</span> proxyData<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发立即执行回调中赋值的get</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 不触发proxy的get set</span>
  proxyData<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 触发set 和回调中的赋值的get</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 不触发proxy的get set</span>
  <span class="token comment">/*effect(()=&gt;{
      console.log(&#39;触发num的回调&#39;);
      dummy = proxyData.num
  }); // 触发立即执行回调中赋值的get
  effect( ()=&gt;{
      console.log(&#39;触发num2的回调&#39;)
      dummy2 = proxyData.num2
  } ); // 触发立即执行回调中赋值的get
  console.log(dummy); // 1 不触发proxy的get set
  proxyData.num = 2; // 触发set 和回调中的赋值的get
  proxyData.num2 = 2; // 触发set 和回调中的赋值的get
  console.log(dummy); // 2 不触发proxy的get set*/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👆 在我们测试使用多个 <code>effect</code> 时没有问题，每个 <code>effect</code> 都会往对应的 key 里存储回调 但是当一个 <code>effect</code> 里依赖多个变量时发现了问题，只把回调存储到了最后一个变量的回调里 这是因为临时变量只对应一个 <code>key</code> 的回调列表 所以临时变量应该对应多个 <code>key</code> 的回调函数列表 在存储回调的时候遍历临时变量列表来存储</p><p>到这里，已经可以有 <code>vue3</code> 双向绑定数据的雏形 也可以发现我们是通过 <code>get</code> 来做回调存储的 当不触发 <code>get</code> 的时候就不会有回调 如：使用判断语句，只有在运行时才能知道会不会进 <code>get</code> ，在 <code>effect</code> 阶段不知道</p><h3 id="_4-深度proxy" tabindex="-1">4. 深度proxy <a class="header-anchor" href="#_4-深度proxy" aria-hidden="true">#</a></h3><p><code>另外，proxy</code> 并不自动支持深度代理， <code>key</code> 对应的回调也不没有深度数据</p><p>要想实现深度数据的 key，首先想到的可能是递归，但是这里有个更取巧的方法 就是， <code>effect</code> 立即执行阶段，如果是深度数据，只会触发外层的 <code>proxy</code> 我们可以利用判断当前值是对象时返回一个 <code>proxy</code> 代理，让深度的值继续触发 get，形成递归的样子</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dummy<span class="token punctuation">;</span>
  <span class="token keyword">const</span> callbackMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> tempCallbackList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 临时变量 立即执行的回调之后获取的对应的回调列表</span>

  <span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发get&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          callbackMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        tempCallbackList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 判断当前值是对象时继续代理，形成递归</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">reactive</span><span class="token punctuation">(</span>originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发set&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
        callbackMap
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newVal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> myData <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 原数据</span>
  <span class="token keyword">const</span> proxyData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>myData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 代理后数据</span>

  <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    dummy <span class="token operator">=</span> proxyData<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  proxyData<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dummy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样就让深度的对象类型数据也走一次 <code>proxy</code> 但是这样的写法有点性能问题，每次深度取值都要重新走一次 <code>proxy</code> 即使同一个值已经走过一次</p><h3 id="_5-优化深度代理" tabindex="-1">5. 优化深度代理 <a class="header-anchor" href="#_5-优化深度代理" aria-hidden="true">#</a></h3><p>这里我们用一个 <code>map</code> 存储深度对象的 <code>proxy</code> ，就以对象为 <code>key</code> 其实也像是把深度对象扁平化出来存储了，仅仅为了省去每次深度取值时的重复 <code>proxy</code></p><div class="language-js"><pre><code><span class="token keyword">const</span> deepProxyMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 其实也像是把深度对象扁平化出来存储了，仅仅为了省去每次深度取值时的重复</span>

<span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>deepProxyMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> deepProxyMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发get&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        callbackMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>originData<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      tempCallbackList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callbackMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>originData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">reactive</span><span class="token punctuation">(</span>originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> originData<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  deepProxyMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="结合dom的reactive案例" tabindex="-1">结合dom的reactive案例 <a class="header-anchor" href="#结合dom的reactive案例" aria-hidden="true">#</a></h2><h3 id="_1-input双向数据绑定（v-model）" tabindex="-1">1. input双向数据绑定（v-model） <a class="header-anchor" href="#_1-input双向数据绑定（v-model）" aria-hidden="true">#</a></h3><h3 id="_2-拖拽取色值" tabindex="-1">2. 拖拽取色值 <a class="header-anchor" href="#_2-拖拽取色值" aria-hidden="true">#</a></h3><hr><p>目前很流行的一种大型项目管理方式 Monorepo</p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-hidden="true">#</a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">proxy-MDN</a></p><p><a href="https://github.com/vuejs/core/tree/main/packages/reactivity" target="_blank" rel="noopener noreferrer">vue3-reactivity</a></p><p><a href="https://zhuanlan.zhihu.com/p/148937064" target="_blank" rel="noopener noreferrer">Vue3 的 Proxy 能做到哪些精确的拦截操作？原理揭秘</a></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/js/Object.entries" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Object.entries</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/js/优雅的Class" data-v-38ede35f><span class="text" data-v-38ede35f>优雅的Class</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"http_http2.md\":\"61f372f8\",\"http_http3.md\":\"f4eae4a7\",\"http_http缓存.md\":\"90dfc416\",\"index.md\":\"7cd664a4\",\"innermanage_内管前端工程.md\":\"2e5b87fc\",\"interview_js基础.md\":\"f3b76f1b\",\"interview_todo.md\":\"a4bea80d\",\"interview__过.md\":\"ad46898e\",\"interview_前端面试之道.md\":\"29e10a7b\",\"interview_各种题目01.md\":\"336c3f0f\",\"interview_手写系列-callbind.md\":\"1a27c36e\",\"interview_手写系列-instanceof.md\":\"5a89338b\",\"interview_手写系列-map和filter和reduce.md\":\"4b19ddd8\",\"interview_手写系列-new原理.md\":\"bb803aa9\",\"interview_手写系列-settime模拟setinterval.md\":\"f315b518\",\"interview_手写系列-发布订阅和观察者.md\":\"f6b28385\",\"interview_手写系列-复杂axios.md\":\"fafdf239\",\"interview_手写系列-复杂promise.md\":\"41f7e308\",\"interview_手写系列-数组转树.md\":\"75c9efc8\",\"interview_手写系列-深拷贝.md\":\"3d378cc3\",\"interview_手写系列-防抖节流.md\":\"621af863\",\"interview_算法01.md\":\"d9c4b61a\",\"jiagou_monorepo.md\":\"725693ea\",\"jiagou_从0到1构建符合标准的公共库.md\":\"4db26899\",\"jiagou_切换主题方案.md\":\"1c6f7cc6\",\"jiagou_前端基础建设与架构30讲.md\":\"545c2f4d\",\"jiagou_搭建组件库.md\":\"75b6105a\",\"jiagou_深入babel.md\":\"98134c12\",\"jiagou_自动生成按需导出目录.md\":\"a0a99e5b\",\"jiagou_表单组件带校验功能.md\":\"037e52c3\",\"js_object.entries.md\":\"d7ef83a2\",\"js_class和构造函数.md\":\"e1c68545\",\"js_dayformat正则的使用.md\":\"da3c8fb2\",\"js_luhn算法.md\":\"1a42337b\",\"js_proxy.md\":\"6ff1ec19\",\"js_优雅的class.md\":\"3df6be82\",\"js_前端模块化.md\":\"9e7f6ead\",\"js_浏览器垃圾回收.md\":\"e21a3e55\",\"js_深入babel.md\":\"52722ee7\",\"js_闭包与垃圾回收.md\":\"749b2ff1\",\"microfrontend_介绍.md\":\"580a3921\",\"microfrontend_拟定微前端架构设计.md\":\"ff7f9528\",\"microfrontend_架构思想.md\":\"08afff96\",\"node_cheetah-learn.md\":\"03f4cd07\",\"node_cli相关学习.md\":\"5b8b30ed\",\"performance_serviceworker.md\":\"8daffe4c\",\"performance_ssr.md\":\"a4ce6081\",\"performance_慕课网web性能优化.md\":\"b9f642c2\",\"typescript_vue2加ts.md\":\"4dfc1521\",\"vue_create-vue脚手架.md\":\"0eba574d\",\"vue_esbuild使用.md\":\"e068bb0d\",\"vue_keep-alive原理.md\":\"44c46c5f\",\"vue_vue-router实现原理.md\":\"1d2621c4\",\"vue_模板编译.md\":\"482e2dc9\",\"vue_路由页面历史栈的处理.md\":\"f827e2a6\",\"vue_重学vue-01模板语法.md\":\"69d88a08\",\"vue_重学vue-02数据驱动视图.md\":\"c681bf73\",\"vue_重学vue-03render函数.md\":\"477b8cdc\",\"vue_重学vue-04内置指令.md\":\"d05b23f6\",\"vue_重学vue-05filter多余吗.md\":\"583eb11a\",\"vue_重学vue-06computer.md\":\"2085b276\",\"vue_重学vue-07watch.md\":\"915b128f\",\"vue_重学vue-08组件.md\":\"1a9f134f\",\"vue_重学vue-09生命周期.md\":\"a715abeb\",\"vue_重学vue-10ref是什么.md\":\"8043a67e\",\"vue_重学vue-11nexttick.md\":\"c1eba6cc\",\"vue_重学vue-8组件通信.md\":\"fe312913\",\"vue_重学vue-vue.use.md\":\"2adddb6d\",\"vue_重学vue-动画内置组件.md\":\"f35266d9\",\"vue3_elementplus.md\":\"474cd264\",\"vue3_入门.md\":\"3cbb2de8\",\"webcomponents_1. webcomponent介绍.md\":\"6dd880b3\",\"webcomponents_2. customelements.md\":\"e890e63a\",\"webpack_1.md\":\"19710796\",\"webpack__草稿.md\":\"a4521525\",\"webpack_实现一个自己的脚手架.md\":\"3a0dcb1e\",\"webpack_重学webpack-01打包工具的思考.md\":\"dc8f4b90\",\"webpack_重学webpack-02模块化原理.md\":\"be9e501e\",\"webpack_重学webpack-03loader.md\":\"34f09632\",\"webpack_重学webpack-04plugin.md\":\"bc5707c3\",\"webpack_重学webpack-05hmr热更新.md\":\"9368db44\",\"week_202110-1.md\":\"66b9ab24\",\"week_202110-2.md\":\"5bcee2e2\",\"week_202111-1.md\":\"72fb7b6d\",\"week__0todo.md\":\"271b539a\",\"week_缓存工具方法思路.md\":\"fdb57aa6\",\"work_ios小白条问题.md\":\"5d8a3aac\"}")</script>
    <script type="module" async src="/assets/app.d95e124d.js"></script>
    
  </body>
</html>