import{_ as n,c as s,o as a,a as p}from"./app.d95e124d.js";const d='{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"js/luhn\u7B97\u6CD5.md","lastUpdated":1664421231358}',t={},o=p(`<div class="language-js"><pre><code><span class="token comment">//luhn\u6821\u9A8C\u89C4\u5219\uFF1A16\u4F4D\u94F6\u884C\u5361\u53F7\uFF0819\u4F4D\u901A\u7528\uFF09:</span>

<span class="token comment">// 1.\u5C06\u672A\u5E26\u6821\u9A8C\u4F4D\u7684 15\uFF08\u621618\uFF09\u4F4D\u5361\u53F7\u4ECE\u53F3\u4F9D\u6B21\u7F16\u53F7 1 \u5230 15\uFF0818\uFF09\uFF0C\u4F4D\u4E8E\u5947\u6570\u4F4D\u53F7\u4E0A\u7684\u6570\u5B57\u4E58\u4EE5 2\u3002</span>
<span class="token comment">// 2.\u5C06\u5947\u4F4D\u4E58\u79EF\u7684\u4E2A\u5341\u4F4D\u5168\u90E8\u76F8\u52A0\uFF0C\u518D\u52A0\u4E0A\u6240\u6709\u5076\u6570\u4F4D\u4E0A\u7684\u6570\u5B57\u3002</span>
<span class="token comment">// 3.\u5C06\u52A0\u6CD5\u548C\u52A0\u4E0A\u6821\u9A8C\u4F4D\u80FD\u88AB 10 \u6574\u9664\u3002</span>

<span class="token comment">//bankno\u4F4D\u94F6\u884C\u5361\u53F7</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">luhnCheck</span><span class="token punctuation">(</span><span class="token parameter">bankno</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> lastNum<span class="token operator">=</span>bankno<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>bankno<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53D6\u51FA\u6700\u540E\u4E00\u4F4D\uFF08\u4E0Eluhn\u8FDB\u884C\u6BD4\u8F83\uFF09</span>
    
        <span class="token keyword">var</span> first15Num<span class="token operator">=</span>bankno<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>bankno<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u524D15\u621618\u4F4D</span>
        <span class="token keyword">var</span> newArr<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span>first15Num<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//\u524D15\u621618\u4F4D\u5012\u5E8F\u5B58\u8FDB\u6570\u7EC4</span>
            newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>first15Num<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> arrJiShu<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u5947\u6570\u4F4D*2\u7684\u79EF &lt;9</span>
        <span class="token keyword">var</span> arrJiShu2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5947\u6570\u4F4D*2\u7684\u79EF &gt;9</span>
        
        <span class="token keyword">var</span> arrOuShu<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u5076\u6570\u4F4D\u6570\u7EC4</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>newArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u5947\u6570\u4F4D</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>newArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token number">9</span><span class="token punctuation">)</span>
                arrJiShu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>newArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                arrJiShu2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>newArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token comment">//\u5076\u6570\u4F4D</span>
            arrOuShu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">var</span> jishu_child1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5947\u6570\u4F4D*2 &gt;9 \u7684\u5206\u5272\u4E4B\u540E\u7684\u6570\u7EC4\u4E2A\u4F4D\u6570</span>
        <span class="token keyword">var</span> jishu_child2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5947\u6570\u4F4D*2 &gt;9 \u7684\u5206\u5272\u4E4B\u540E\u7684\u6570\u7EC4\u5341\u4F4D\u6570</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> h<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>h<span class="token operator">&lt;</span>arrJiShu2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>h<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            jishu_child1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>arrJiShu2<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jishu_child2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>arrJiShu2<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>        
        
        <span class="token keyword">var</span> sumJiShu<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//\u5947\u6570\u4F4D*2 &lt; 9 \u7684\u6570\u7EC4\u4E4B\u548C</span>
        <span class="token keyword">var</span> sumOuShu<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//\u5076\u6570\u4F4D\u6570\u7EC4\u4E4B\u548C</span>
        <span class="token keyword">var</span> sumJiShuChild1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//\u5947\u6570\u4F4D*2 &gt;9 \u7684\u5206\u5272\u4E4B\u540E\u7684\u6570\u7EC4\u4E2A\u4F4D\u6570\u4E4B\u548C</span>
        <span class="token keyword">var</span> sumJiShuChild2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//\u5947\u6570\u4F4D*2 &gt;9 \u7684\u5206\u5272\u4E4B\u540E\u7684\u6570\u7EC4\u5341\u4F4D\u6570\u4E4B\u548C</span>
        <span class="token keyword">var</span> sumTotal<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> m<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>m<span class="token operator">&lt;</span>arrJiShu<span class="token punctuation">.</span>length<span class="token punctuation">;</span>m<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            sumJiShu<span class="token operator">=</span>sumJiShu<span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>arrJiShu<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>arrOuShu<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            sumOuShu<span class="token operator">=</span>sumOuShu<span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>arrOuShu<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> p<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>p<span class="token operator">&lt;</span>jishu_child1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>p<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            sumJiShuChild1<span class="token operator">=</span>sumJiShuChild1<span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>jishu_child1<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sumJiShuChild2<span class="token operator">=</span>sumJiShuChild2<span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>jishu_child2<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>      
        <span class="token comment">//\u8BA1\u7B97\u603B\u548C</span>
        sumTotal<span class="token operator">=</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sumJiShu<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sumOuShu<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sumJiShuChild1<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sumJiShuChild2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//\u8BA1\u7B97luhn\u503C</span>
        <span class="token keyword">var</span> k<span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>sumTotal<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">?</span><span class="token number">10</span><span class="token operator">:</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sumTotal<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span>        
        <span class="token keyword">var</span> luhn<span class="token operator">=</span> <span class="token number">10</span><span class="token operator">-</span>k<span class="token punctuation">;</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span>lastNum<span class="token operator">==</span>luhn<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#banknoInfo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;luhn\u9A8C\u8BC1\u901A\u8FC7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#banknoInfo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;\u94F6\u884C\u5361\u53F7\u4E0D\u7B26\u5408luhn\u6821\u9A8C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>        
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">luhnCheck</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#kh&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>`,1),c=[o];function e(u,l,k,r,i,m){return a(),s("div",null,c)}var f=n(t,[["render",e]]);export{d as __pageData,f as default};
