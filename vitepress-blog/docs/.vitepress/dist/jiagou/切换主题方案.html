<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>原生css变量 | blog</title>
    <meta name="description" content="vue、js、nodejs等等的学习记录">
    <link rel="stylesheet" href="/assets/style.49eed234.css">
    <link rel="modulepreload" href="/assets/Home.ae65bc00.js">
    <link rel="modulepreload" href="/assets/app.d95e124d.js">
    <link rel="modulepreload" href="/assets/jiagou_切换主题方案.md.1c6f7cc6.lean.js">
    
    <meta name="twitter:title" content="原生css变量 | blog">
  <meta property="og:title" content="原生css变量 | blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="blog, back to home" data-v-675d8756 data-v-cc01ef16><!----> blog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"> 介绍</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/">介绍</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">http</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http2">http2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http3">http3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http缓存">http缓存</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">innermanage</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/innermanage/内管前端工程">内管前端工程</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">interview</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/JS基础">JS基础</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/TODO">TODO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/前端面试之道">前端面试之道</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/各种题目01">各种题目01</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-callbind">手写系列-callbind</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-instanceof">手写系列-instanceof</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-map和filter和reduce">手写系列-map和filter和reduce</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-new原理">手写系列-new原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-setTime模拟setInterval">手写系列-setTime模拟setInterval</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-发布订阅和观察者">手写系列-发布订阅和观察者</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂axios">手写系列-复杂axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂promise">手写系列-复杂promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-数组转树">手写系列-数组转树</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-深拷贝">手写系列-深拷贝</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-防抖节流">手写系列-防抖节流</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/算法01">算法01</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">jiagou</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/monorepo">monorepo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/从0到1构建符合标准的公共库">从0到1构建符合标准的公共库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/jiagou/切换主题方案">切换主题方案</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#原生css变量">原生css变量</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#自动随系统切换深色模式">自动随系统切换深色模式</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#js手动控制主题色">js手动控制主题色</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#多套主题样式文件">多套主题样式文件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#图片的暗黑模式？">图片的暗黑模式？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#tailwindcss的暗黑模式">tailwindcss的暗黑模式</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#假如给hmba设计换肤功能">假如给HMBA设计换肤功能</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#给管理系统设计换肤功能">给管理系统设计换肤功能</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#参考资料">参考资料</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/前端基础建设与架构30讲">前端基础建设与架构30讲</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/搭建组件库">搭建组件库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/自动生成按需导出目录">自动生成按需导出目录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/表单组件带校验功能">表单组件带校验功能</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/js/class和构造函数">class和构造函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/dayFormat正则的使用">dayFormat正则的使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/luhn算法">luhn算法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/Object.entries">Object.entries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/proxy">proxy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/优雅的Class">优雅的Class</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/前端模块化">前端模块化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/浏览器垃圾回收">浏览器垃圾回收</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/闭包与垃圾回收">闭包与垃圾回收</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">microFrontend</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/介绍">介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/拟定微前端架构设计">拟定微前端架构设计</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/架构思想">架构思想</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">node</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cheetah-learn">cheetah-learn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cli相关学习">cli相关学习</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">performance</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/serviceWorker">serviceWorker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/ssr">ssr</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/慕课网web性能优化">慕课网web性能优化</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">typescript</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript/vue2加ts">vue2加ts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/create-vue脚手架">create-vue脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/esbuild使用">esbuild使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/keep-alive原理">keep-alive原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/vue-router实现原理">vue-router实现原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/模板编译">模板编译</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/路由页面历史栈的处理">路由页面历史栈的处理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-01模板语法">重学vue-01模板语法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-02数据驱动视图">重学vue-02数据驱动视图</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-03render函数">重学vue-03render函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-04内置指令">重学vue-04内置指令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-05filter多余吗">重学vue-05filter多余吗</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-06computer">重学vue-06computer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-07watch">重学vue-07watch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-08组件">重学vue-08组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-09生命周期">重学vue-09生命周期</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-10ref是什么">重学vue-10ref是什么</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-11nextTick">重学vue-11nextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-8组件通信">重学vue-8组件通信</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-vue.use">重学vue-vue.use</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-动画内置组件">重学vue-动画内置组件</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue3</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/elementPlus">elementPlus</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/入门">入门</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webComponents</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/1. webComponent介绍">1. webComponent介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/2. customElements">2. customElements</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webpack</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/1">1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/实现一个自己的脚手架">实现一个自己的脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-01打包工具的思考">重学webpack-01打包工具的思考</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-02模块化原理">重学webpack-02模块化原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-03loader">重学webpack-03loader</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-04plugin">重学webpack-04plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-05HMR热更新">重学webpack-05HMR热更新</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">week</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-1">202110-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-2">202110-2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202111-1">202111-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/缓存工具方法思路">缓存工具方法思路</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">work</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/work/ios小白条问题">ios小白条问题</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h2 id="原生css变量" tabindex="-1">原生css变量 <a class="header-anchor" href="#原生css变量" aria-hidden="true">#</a></h2><h3 id="自动随系统切换深色模式" tabindex="-1">自动随系统切换深色模式 <a class="header-anchor" href="#自动随系统切换深色模式" aria-hidden="true">#</a></h3><blockquote><p>利用<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="noopener noreferrer">prefers-color-scheme</a> 媒体查询检测网页是深色模式还是日间模式 媒体查询优先级 浏览器的外观模式 &gt; 系统的外观模式</p></blockquote><div class="language-css"><pre><code><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> light | dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">:root</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token selector">body</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>适用于<code>自动</code>随系统切换2种主题色的场景，多主题色时不适用 需要留意兼容性<a href="https://caniuse.com/?search=prefers-color-scheme" target="_blank" rel="noopener noreferrer">can i use</a></p></blockquote><p>如<a href="https://github.com/vuejs/create-vue" target="_blank" rel="noopener noreferrer">create-vue</a>脚手架初始化出来的项目：</p><div class="language-css"><pre><code><span class="token comment">/* 颜色变量 from &lt;https://github.com/vuejs/theme&gt; */</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--vt-c-white</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">--vt-c-white-soft</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>
  <span class="token property">--vt-c-white-mute</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>

  <span class="token property">--vt-c-black</span><span class="token punctuation">:</span> #181818<span class="token punctuation">;</span>
  <span class="token property">--vt-c-black-soft</span><span class="token punctuation">:</span> #222222<span class="token punctuation">;</span>
  <span class="token property">--vt-c-black-mute</span><span class="token punctuation">:</span> #282828<span class="token punctuation">;</span>

  <span class="token property">--vt-c-indigo</span><span class="token punctuation">:</span> #2c3e50<span class="token punctuation">;</span>

  <span class="token property">--vt-c-divider-light-1</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 0.29<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--vt-c-divider-light-2</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 0.12<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--vt-c-divider-dark-1</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>84<span class="token punctuation">,</span> 84<span class="token punctuation">,</span> 84<span class="token punctuation">,</span> 0.65<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--vt-c-divider-dark-2</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>84<span class="token punctuation">,</span> 84<span class="token punctuation">,</span> 84<span class="token punctuation">,</span> 0.48<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token property">--vt-c-text-light-1</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-indigo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--vt-c-text-light-2</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 0.66<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--vt-c-text-dark-1</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-white<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--vt-c-text-dark-2</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>235<span class="token punctuation">,</span> 235<span class="token punctuation">,</span> 235<span class="token punctuation">,</span> 0.64<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 默认主题色变量 白色 */</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--color-background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-white<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--color-background-soft</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-white-soft<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--color-background-mute</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-white-mute<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token property">--color-border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-divider-light-2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--color-border-hover</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-divider-light-1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token property">--color-heading</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-text-light-1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--color-text</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-text-light-1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token property">--section-gap</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 深色模式变量 */</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">:root</span> <span class="token punctuation">{</span>
    <span class="token property">--color-background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-black<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">--color-background-soft</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-black-soft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">--color-background-mute</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-black-mute<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token property">--color-border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-divider-dark-2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">--color-border-hover</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-divider-dark-1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token property">--color-heading</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-text-dark-1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">--color-text</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vt-c-text-dark-2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编写业务代码的时候使用变量(得益于原生css变量定义在<code>:root</code>上，业务代码不需要手动引入css资源)</p><div class="language-css"><pre><code><span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-background<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>小结：</p><ul><li>业务代码需要用css变量编写颜色,如果是现有项目做支持需要考虑全量修改代码的影响</li><li>1个颜色变量对应2种值,如上写法,颜色值虽好维护,颜色变量2种值的映射则需要手动重复在媒体查询内编写</li><li>深色模式时，会闪一次白色(可以加一点动画实现渐变到黑色的效果,但是闪白色还是避免不了)</li><li>TODO: 第三方组件库如何支持覆写样式使用颜色变量</li><li>TODO: 自动决定主题色,扩展开关切换,优先级:手动(存<code>sessionStore</code>即可)&gt;浏览器&gt;系统</li></ul><h3 id="js手动控制主题色" tabindex="-1">js手动控制主题色 <a class="header-anchor" href="#js手动控制主题色" aria-hidden="true">#</a></h3><blockquote><p>预先定义好不同主题原生CSS变量,通过js动态切换公共类名来达到换肤效果</p></blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/:root" target="_blank" rel="noopener noreferrer">.root</a> 表示 <code>&lt;html&gt;</code> 元素，除了优先级更高之外，与 html 选择器相同。 除了css选择器有样式优先级,样式引入方式也有优先级,综合引入方式和选择器的优先级是什么</p><p>直接写属性选择器是什么操作，<code>[data-theme:&quot;dark&quot;] {}</code> 为什么<code>html</code>选择器也是只能写在root上面</p><p>为什么分开属性选择的样式文件和<code>:root</code>的样式并让属性选择器顺序在下面引入，就可以做到优先级更高 (普通选择器不会因为分离文件就样式优先级更高)</p><p>在乎顺序,在同一文件里属性选择器在:root上才能生效,并且优先级比root低(优先级低会因为顺序？)</p><p>根标签或html影响的可不止是body，还有head呢 通配符*那就完全不一样了，是选中所有元素 有些属性的设置是不继承的，所以区分这些是非常有意义的</p><p>:root或html里面会写一些css变量 *在去除默认样式的时候非常常用 body那就不用我说了吧，能实际看到的，你想他长啥样就设置他就对了</p><p>直接写属性选择器，表示所有有该属性的元素都选中，常用写法会局限具体的选择器加上属性，不代表不能直接用属性选择器</p><p>在这个示例代码里，属性选择器的结果就是html标签,全等 也就是html选择器也不能写在:root下面 通过另外写文件并置于下面，可以让html选择器的优先级高于:root 这样感觉:root和html选择器完全就是同一个选择器了因为优先级跟顺序有关 :root存在的意义又是什么 那为什么定义css变量要定义在:root而不是html呢(优先级高？写起来更好看？)</p><h2 id="多套主题样式文件" tabindex="-1">多套主题样式文件 <a class="header-anchor" href="#多套主题样式文件" aria-hidden="true">#</a></h2><p>方案一: 预先定义好不同主题原生CSS变量,通过js动态切换公共类名来达到换肤效果</p><p>方案二: 预先打包出不同主题样式css,js动态加载不同的样式表,如下: * theme-green.css * theme-red.css * theme-black.css</p><p>方案三: localStorage存储主题,js动态获取本地存储换肤</p><p>方案四: element和antd的动态换肤,需要实时编译style样式表</p><p>类似element-ui做的换肤，把颜色的样式都写在head头部的style标签里面，当换颜色的时候，style标签id为docs-style和chalk-style里面的颜色就会被替换</p><p><a href="https://element.eleme.cn/#/zh-CN/theme/preview" target="_blank" rel="noopener noreferrer">oo</a></p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colorId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.bg</span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #00aaee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.text</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #00aaee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bg<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token string">&#39;00aaee&#39;</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>a皮肤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bg<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token string">&#39;00ee57&#39;</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>b皮肤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bg<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token string">&#39;ee0043&#39;</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>c皮肤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">let</span> currentColor <span class="token operator">=</span> <span class="token string">&#39;00aaee&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sty <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;colorId&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> sty<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>

  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>currentColor<span class="token punctuation">,</span><span class="token string">&#39;g&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  sty<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
  currentColor <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>真正要实现起来当然要复杂一些，颜色肯定不止一个，element是颜色对应一个关键字的数组，然后把style里面的颜色都先替换成关键字，然后再根据颜色生成对应的数组，接着把关键字替换回颜色，最后写入style标签。</p><p>另外一种antd利用 Less 的变量以及在浏览器编译没有去实验一下，本地连antd的官网都打不开。还有之前有提到过的css in js在这种换肤场景下好像也非常的合适。</p><h2 id="图片的暗黑模式？" tabindex="-1">图片的暗黑模式？ <a class="header-anchor" href="#图片的暗黑模式？" aria-hidden="true">#</a></h2><blockquote><p>有css图片样式可以调整图片亮度，背景图待查 仅仅是调整图片亮度，该白还是白</p></blockquote><h2 id="tailwindcss的暗黑模式" tabindex="-1">tailwindcss的暗黑模式 <a class="header-anchor" href="#tailwindcss的暗黑模式" aria-hidden="true">#</a></h2><p>webpack的postcss</p><h2 id="假如给hmba设计换肤功能" tabindex="-1">假如给HMBA设计换肤功能 <a class="header-anchor" href="#假如给hmba设计换肤功能" aria-hidden="true">#</a></h2><blockquote><p>自己的组件库，可以修改代码支持颜色变量</p></blockquote><blockquote><p>难点是存量业务代码太多，手动修改全部业务代码样式不智能(组件先支持暗黑模式，业务页面不得不支持，或者精确控制业务功能不切换组件主题)</p></blockquote><h2 id="给管理系统设计换肤功能" tabindex="-1">给管理系统设计换肤功能 <a class="header-anchor" href="#给管理系统设计换肤功能" aria-hidden="true">#</a></h2><blockquote><p>要考虑第三方组件样式和业务样式 业务样式可以修改代码支持颜色变量，第三方组件不能直接修改代码来支持变量</p></blockquote><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-hidden="true">#</a></h2><ul><li><a href="https://caniuse.com/?search=prefers-color-scheme" target="_blank" rel="noopener noreferrer">为你的网页添加深色模式-媒体查询</a></li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/jiagou/从0到1构建符合标准的公共库" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>从0到1构建符合标准的公共库</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/jiagou/前端基础建设与架构30讲" data-v-38ede35f><span class="text" data-v-38ede35f>前端基础建设与架构30讲</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"http_http2.md\":\"61f372f8\",\"http_http3.md\":\"f4eae4a7\",\"http_http缓存.md\":\"90dfc416\",\"index.md\":\"7cd664a4\",\"innermanage_内管前端工程.md\":\"2e5b87fc\",\"interview_js基础.md\":\"f3b76f1b\",\"interview_todo.md\":\"a4bea80d\",\"interview__过.md\":\"ad46898e\",\"interview_前端面试之道.md\":\"29e10a7b\",\"interview_各种题目01.md\":\"336c3f0f\",\"interview_手写系列-callbind.md\":\"1a27c36e\",\"interview_手写系列-instanceof.md\":\"5a89338b\",\"interview_手写系列-map和filter和reduce.md\":\"4b19ddd8\",\"interview_手写系列-new原理.md\":\"bb803aa9\",\"interview_手写系列-settime模拟setinterval.md\":\"f315b518\",\"interview_手写系列-发布订阅和观察者.md\":\"f6b28385\",\"interview_手写系列-复杂axios.md\":\"fafdf239\",\"interview_手写系列-复杂promise.md\":\"41f7e308\",\"interview_手写系列-数组转树.md\":\"75c9efc8\",\"interview_手写系列-深拷贝.md\":\"3d378cc3\",\"interview_手写系列-防抖节流.md\":\"621af863\",\"interview_算法01.md\":\"d9c4b61a\",\"jiagou_monorepo.md\":\"725693ea\",\"jiagou_从0到1构建符合标准的公共库.md\":\"4db26899\",\"jiagou_切换主题方案.md\":\"1c6f7cc6\",\"jiagou_前端基础建设与架构30讲.md\":\"545c2f4d\",\"jiagou_搭建组件库.md\":\"75b6105a\",\"jiagou_深入babel.md\":\"98134c12\",\"jiagou_自动生成按需导出目录.md\":\"a0a99e5b\",\"jiagou_表单组件带校验功能.md\":\"037e52c3\",\"js_object.entries.md\":\"d7ef83a2\",\"js_class和构造函数.md\":\"e1c68545\",\"js_dayformat正则的使用.md\":\"da3c8fb2\",\"js_luhn算法.md\":\"1a42337b\",\"js_proxy.md\":\"6ff1ec19\",\"js_优雅的class.md\":\"3df6be82\",\"js_前端模块化.md\":\"9e7f6ead\",\"js_浏览器垃圾回收.md\":\"e21a3e55\",\"js_深入babel.md\":\"52722ee7\",\"js_闭包与垃圾回收.md\":\"749b2ff1\",\"microfrontend_介绍.md\":\"580a3921\",\"microfrontend_拟定微前端架构设计.md\":\"ff7f9528\",\"microfrontend_架构思想.md\":\"08afff96\",\"node_cheetah-learn.md\":\"03f4cd07\",\"node_cli相关学习.md\":\"5b8b30ed\",\"performance_serviceworker.md\":\"8daffe4c\",\"performance_ssr.md\":\"a4ce6081\",\"performance_慕课网web性能优化.md\":\"b9f642c2\",\"typescript_vue2加ts.md\":\"4dfc1521\",\"vue_create-vue脚手架.md\":\"0eba574d\",\"vue_esbuild使用.md\":\"e068bb0d\",\"vue_keep-alive原理.md\":\"44c46c5f\",\"vue_vue-router实现原理.md\":\"1d2621c4\",\"vue_模板编译.md\":\"482e2dc9\",\"vue_路由页面历史栈的处理.md\":\"f827e2a6\",\"vue_重学vue-01模板语法.md\":\"69d88a08\",\"vue_重学vue-02数据驱动视图.md\":\"c681bf73\",\"vue_重学vue-03render函数.md\":\"477b8cdc\",\"vue_重学vue-04内置指令.md\":\"d05b23f6\",\"vue_重学vue-05filter多余吗.md\":\"583eb11a\",\"vue_重学vue-06computer.md\":\"2085b276\",\"vue_重学vue-07watch.md\":\"915b128f\",\"vue_重学vue-08组件.md\":\"1a9f134f\",\"vue_重学vue-09生命周期.md\":\"a715abeb\",\"vue_重学vue-10ref是什么.md\":\"8043a67e\",\"vue_重学vue-11nexttick.md\":\"c1eba6cc\",\"vue_重学vue-8组件通信.md\":\"fe312913\",\"vue_重学vue-vue.use.md\":\"2adddb6d\",\"vue_重学vue-动画内置组件.md\":\"f35266d9\",\"vue3_elementplus.md\":\"474cd264\",\"vue3_入门.md\":\"3cbb2de8\",\"webcomponents_1. webcomponent介绍.md\":\"6dd880b3\",\"webcomponents_2. customelements.md\":\"e890e63a\",\"webpack_1.md\":\"19710796\",\"webpack__草稿.md\":\"a4521525\",\"webpack_实现一个自己的脚手架.md\":\"3a0dcb1e\",\"webpack_重学webpack-01打包工具的思考.md\":\"dc8f4b90\",\"webpack_重学webpack-02模块化原理.md\":\"be9e501e\",\"webpack_重学webpack-03loader.md\":\"34f09632\",\"webpack_重学webpack-04plugin.md\":\"bc5707c3\",\"webpack_重学webpack-05hmr热更新.md\":\"9368db44\",\"week_202110-1.md\":\"66b9ab24\",\"week_202110-2.md\":\"5bcee2e2\",\"week_202111-1.md\":\"72fb7b6d\",\"week__0todo.md\":\"271b539a\",\"week_缓存工具方法思路.md\":\"fdb57aa6\",\"work_ios小白条问题.md\":\"5d8a3aac\"}")</script>
    <script type="module" async src="/assets/app.d95e124d.js"></script>
    
  </body>
</html>