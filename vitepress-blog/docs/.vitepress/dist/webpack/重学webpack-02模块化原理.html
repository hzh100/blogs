<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端js的模块化 | blog</title>
    <meta name="description" content="vue、js、nodejs等等的学习记录">
    <link rel="stylesheet" href="/assets/style.49eed234.css">
    <link rel="modulepreload" href="/assets/Home.ae65bc00.js">
    <link rel="modulepreload" href="/assets/app.d95e124d.js">
    <link rel="modulepreload" href="/assets/webpack_重学webpack-02模块化原理.md.be9e501e.lean.js">
    
    <meta name="twitter:title" content="前端js的模块化 | blog">
  <meta property="og:title" content="前端js的模块化 | blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="blog, back to home" data-v-675d8756 data-v-cc01ef16><!----> blog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"> 介绍</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/">介绍</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">http</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http2">http2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http3">http3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http缓存">http缓存</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">innermanage</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/innermanage/内管前端工程">内管前端工程</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">interview</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/JS基础">JS基础</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/TODO">TODO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/前端面试之道">前端面试之道</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/各种题目01">各种题目01</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-callbind">手写系列-callbind</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-instanceof">手写系列-instanceof</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-map和filter和reduce">手写系列-map和filter和reduce</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-new原理">手写系列-new原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-setTime模拟setInterval">手写系列-setTime模拟setInterval</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-发布订阅和观察者">手写系列-发布订阅和观察者</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂axios">手写系列-复杂axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-复杂promise">手写系列-复杂promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-数组转树">手写系列-数组转树</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-深拷贝">手写系列-深拷贝</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/手写系列-防抖节流">手写系列-防抖节流</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/算法01">算法01</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">jiagou</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/monorepo">monorepo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/从0到1构建符合标准的公共库">从0到1构建符合标准的公共库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/切换主题方案">切换主题方案</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/前端基础建设与架构30讲">前端基础建设与架构30讲</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/搭建组件库">搭建组件库</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/自动生成按需导出目录">自动生成按需导出目录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/表单组件带校验功能">表单组件带校验功能</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/js/class和构造函数">class和构造函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/dayFormat正则的使用">dayFormat正则的使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/luhn算法">luhn算法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/Object.entries">Object.entries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/proxy">proxy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/优雅的Class">优雅的Class</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/前端模块化">前端模块化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/浏览器垃圾回收">浏览器垃圾回收</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/深入babel">深入babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/闭包与垃圾回收">闭包与垃圾回收</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">microFrontend</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/介绍">介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/拟定微前端架构设计">拟定微前端架构设计</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/架构思想">架构思想</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">node</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cheetah-learn">cheetah-learn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cli相关学习">cli相关学习</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">performance</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/serviceWorker">serviceWorker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/ssr">ssr</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/慕课网web性能优化">慕课网web性能优化</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">typescript</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript/vue2加ts">vue2加ts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/create-vue脚手架">create-vue脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/esbuild使用">esbuild使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/keep-alive原理">keep-alive原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/vue-router实现原理">vue-router实现原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/模板编译">模板编译</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/路由页面历史栈的处理">路由页面历史栈的处理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-01模板语法">重学vue-01模板语法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-02数据驱动视图">重学vue-02数据驱动视图</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-03render函数">重学vue-03render函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-04内置指令">重学vue-04内置指令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-05filter多余吗">重学vue-05filter多余吗</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-06computer">重学vue-06computer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-07watch">重学vue-07watch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-08组件">重学vue-08组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-09生命周期">重学vue-09生命周期</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-10ref是什么">重学vue-10ref是什么</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-11nextTick">重学vue-11nextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-8组件通信">重学vue-8组件通信</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-vue.use">重学vue-vue.use</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/重学vue-动画内置组件">重学vue-动画内置组件</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue3</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/elementPlus">elementPlus</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/入门">入门</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webComponents</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/1. webComponent介绍">1. webComponent介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/2. customElements">2. customElements</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webpack</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/1">1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/实现一个自己的脚手架">实现一个自己的脚手架</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-01打包工具的思考">重学webpack-01打包工具的思考</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/webpack/重学webpack-02模块化原理">重学webpack-02模块化原理</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#前端js的模块化">前端js的模块化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#webpack的模块化">webpack的模块化</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#搭一个简易webpack示例">搭一个简易webpack示例</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#分析打包后产物">分析打包后产物</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#webpack-require">webpack.require</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#webpack4的打包产物分析">webpack4的打包产物分析</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#手写模块化打包工具">手写模块化打包工具</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#总结">总结</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-03loader">重学webpack-03loader</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-04plugin">重学webpack-04plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/重学webpack-05HMR热更新">重学webpack-05HMR热更新</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">week</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-1">202110-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-2">202110-2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202111-1">202111-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/缓存工具方法思路">缓存工具方法思路</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">work</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/work/ios小白条问题">ios小白条问题</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><blockquote><p><code>webpack</code> 是一个用于现代 <code>JavaScript</code> 应用程序的 <code>静态模块打包工具</code>--<a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noopener noreferrer">webpack官方文档</a></p></blockquote><h2 id="前端js的模块化" tabindex="-1">前端js的模块化 <a class="header-anchor" href="#前端js的模块化" aria-hidden="true">#</a></h2><p>先抛开打包工具的模块化，我们看看纯js的模块，<code>&lt;script src=&quot;&quot;&gt;、CMD、ESM、UMD</code></p><p><a href="./../js/前端模块化.html">前端模块化</a></p><h2 id="webpack的模块化" tabindex="-1">webpack的模块化 <a class="header-anchor" href="#webpack的模块化" aria-hidden="true">#</a></h2><p>webpack要做的是识别开发过程的nodejs模块化转为浏览器的模块化方式</p><p>webpack选择让浏览器支持模块化的方式是自己实现类似nodejs的CJS</p><h3 id="搭一个简易webpack示例" tabindex="-1">搭一个简易webpack示例 <a class="header-anchor" href="#搭一个简易webpack示例" aria-hidden="true">#</a></h3><p>安装<code>yarn add -D webpack webpack-cli</code></p><div class="language-js"><pre><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// index.js</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a.js&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./b.js&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>

<span class="token comment">// a.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// b.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;b&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行<code>npx webpack</code> 只生成了<code>dist/main.js</code>一个文件</p><h3 id="分析打包后产物" tabindex="-1">分析打包后产物 <a class="header-anchor" href="#分析打包后产物" aria-hidden="true">#</a></h3><p>👇 我们把注释删掉看看</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> __webpack_modules__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;./a.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;module.exports = {\n  a: &#39;a&#39;\n}\n\n//# sourceURL=webpack://origin-webpack/./a.js?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;./b.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;module.exports = {\n  b: &#39;b&#39;\n}\n\n//# sourceURL=webpack://origin-webpack/./b.js?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;./index.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">__unused_webpack_module<span class="token punctuation">,</span> __unused_webpack_exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;const a = __webpack_require__(/*! ./a.js */ \&quot;./a.js\&quot;)\nconst b = __webpack_require__(/*! ./b.js */ \&quot;./b.js\&quot;)\nconsole.log(a,b)\n\n//# sourceURL=webpack://origin-webpack/./index.js?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> __webpack_module_cache__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> cachedModule <span class="token operator">=</span> __webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cachedModule <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> cachedModule<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">var</span> module <span class="token operator">=</span> __webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		__webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
  
	<span class="token keyword">var</span> __webpack_exports__ <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>👇 我们再精简一下变量名</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> _modules <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;./a.js&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;module.exports = {a:&#39;a&#39;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;./b.js&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;module.exports = {b:&#39;b&#39;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;./index.js&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">__unused_webpack_module<span class="token punctuation">,</span> __unused_webpack_exports<span class="token punctuation">,</span> _require</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        const a = _require(&quot;./a.js&quot;)
        const b = _require(&quot;./b.js&quot;)
        console.log(a,b)
      </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span>  _cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">_require</span><span class="token punctuation">(</span><span class="token parameter">moduleName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cachedModule <span class="token operator">=</span> _cache<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedModule <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> cachedModule<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> module <span class="token operator">=</span> _cache<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    _modules<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> _require<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">_require</span><span class="token punctuation">(</span><span class="token string">&#39;./index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>👆 把这段代码丢到浏览器就可以直接运行了</p><h2 id="webpack-require" tabindex="-1">webpack.require <a class="header-anchor" href="#webpack-require" aria-hidden="true">#</a></h2><blockquote><p>不熟悉nodejs的CommonJs模块化的还是先熟悉一下，因为webpack的模块化就是一种CJS</p></blockquote><p>和nodejs一样，webpack会把每个模块js包装一层注入模块化工具方法</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token parameter">fileContent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 拼接函数进行包装 注意要包一层()才不会被eval立即执行,而是返回一个字符串()内的函数</span>
  <span class="token keyword">const</span> newfileContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(function (myrequire){
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileContent<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  })</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">return</span> <span class="token function">eval</span><span class="token punctuation">(</span>newfileContent<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👇 我们再去掉webpack的cache部分(在 <a href="./../js/前端模块化.html#从0实现简易commonjs">从0实现CommonJs</a> 里解释过cache用来解决重复引入的问题)</p><div class="language-js"><pre><code><span class="token keyword">const</span> _modules <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_require</span><span class="token punctuation">(</span><span class="token parameter">moduleName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span>  module <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  _modules<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> _require<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👆 和我们手写nodejs的CJS一模一样</p><hr><p>当webpack配置 <code>mode:none</code> 的时候不会用eval包,eval会导致调试打包后产物无法断点调试模块内容</p><p>TODO: <code>mode:none</code> 的时候为什么用数组和序列 而不是文件名（收集依赖关系更快？</p><hr><h2 id="webpack4的打包产物分析" tabindex="-1">webpack4的打包产物分析 <a class="header-anchor" href="#webpack4的打包产物分析" aria-hidden="true">#</a></h2><blockquote><p>可能有人发现了，怎么跟网上很多的webpack打包产物不太一样，这是因为我们上面的是webpack5的打包产物，而以前webpack4是另一种结构</p></blockquote><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">_require</span><span class="token punctuation">(</span><span class="token parameter">modelId</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="手写模块化打包工具" tabindex="-1">手写模块化打包工具 <a class="header-anchor" href="#手写模块化打包工具" aria-hidden="true">#</a></h2><blockquote><p>参考 <a href="https://github.com/dykily/simple_webpack/blob/master/bundler.js" target="_blank" rel="noopener noreferrer">simple_webpack --github</a></p></blockquote><p>不考虑代码转译，我们尝试实现一个<strong>只具备实现模块化的打包工具</strong> 和<code>从0实现nodejs的CJS</code>不一样，我们还需要解决的一个难点是<strong>深度识别</strong>文件内容中的<code>require</code>和<code>export</code></p><ul><li>收集：收集js的依赖关系成一个数组/对象(使用广度优先递归-队列)</li><li>注入：遍历模块依赖关系数组,用立即执行js注入require等参数实现浏览器支持CMD(参考手写CommonJs)</li><li>输出：立即执行函数是用字符串写成的，最终合并写入一个js文件中</li></ul><blockquote><p>不用AST，用正则处理文件内容来注入require并且整合成一个js也是可以的 正则也不失为一种收集依赖的办法 但是正则的效率和局限性也摆在那里，我们用更成熟的AST来收集吧</p></blockquote><p>webpack的内部用的是改造后的 <a href="https://www.npmjs.com/package/acorn" target="_blank" rel="noopener noreferrer">acorn-npm</a> / <a href="https://github.com/acornjs/acorn" target="_blank" rel="noopener noreferrer">acorn-github</a> 来生成AST</p><p><code>babel</code>也是基于<code>acorn</code>生成AST的</p><hr><p>思考🤔: <code>acorn</code>和<code>babel-parser</code>都是js的解析器，有什么区别吗？</p><blockquote><p><code>@babel/parser</code>（之前就是<code>babylon</code>）是从<code>acorn fork</code> 出来的，只是基本都被重写了，但是有些<code>acorn</code>的算法仍热被沿用下来了。</p></blockquote><ul><li>@babel/parser不支持第三方的插件。</li><li>acorn只支持第四阶段的提案(基本等于写入标准了，只是时间的问题 见此)。</li><li>AST的格式不同，不过可以启动@babel/parser的estree插件来和acorn的AST格式匹配</li></ul><hr><p>因为 <code>webpack</code> 并没有把 <code>acorn</code> 部分的代码发布成包而是<a href="https://github.com/webpack/webpack/blob/a07a1269f0a0b23d40de6c9565eeaf962fbc8904/lib/javascript/JavascriptParser.js" target="_blank" rel="noopener noreferrer">内部的工具方法javascript/JavascriptParser.js</a></p><p>👇 因此我们选择用 <code>babel</code> 来生成<code>AST</code></p><div class="language-js"><pre><code><span class="token comment">// getAst.js</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Parser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@babel/parser&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">getAst</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 将文件内容转为AST抽象语法树</span>
  <span class="token keyword">return</span> Parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&#39;module&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> getAst
</code></pre></div><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220320204335.png" alt=""> 👇 打印一个AST节点Node的内容子节点，我们有办法通过节点type识别出<code>import</code>，却没办法识别 <code>require</code></p><ul><li>ImportDeclaration: 引入声明</li><li>ExpressionStatement: 表达式语句</li></ul><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220320210448.png" alt=""></p><p>我们希望识别出AST中的引入代码，把被引入资源路径收集到一个集合中 等待我们后续的处理</p><hr><p>思考🤔: 手写nodejs的CJS为什么不需要识别require？</p><ul><li>确实，我们要实现业务代码中写require，运行时require存在的形式，只要包装注入即可。在这里我们也可以不识别require直接往入口文件注入require，但是没办法找到深度的资源引用</li><li>在nodejs中的做法是包装注入后立即执行，因此可以自然形成递归注入</li><li>但是在打包工具里，我们要输出一个所有引入资源的模块集合，而不是要立即执行业务代码，因此要通过AST来识别所有引入资源整合到一个文件内容中输出</li></ul><hr><p>怎么让AST识别<code>require</code>,我们先放一下。。。(🥬🐶)</p><p>我们业务代码改为用import，识别出来后转成<code>require</code>，再注入我们的<code>require</code>。。。</p><p>👇 用babel识别业务代码中的import</p><div class="language-js"><pre><code><span class="token keyword">const</span> traverse <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/traverse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">findRequire</span><span class="token punctuation">(</span><span class="token parameter">ast</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dependencies <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// key和value都用路径</span>
  <span class="token comment">//遍历当前ast（抽象语法树）</span>
  <span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//找到有 import语法 的对应节点</span>
    <span class="token function-variable function">ImportDeclaration</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//如果当前js文件 有一句 import message from &#39;./message.js&#39;， </span>
      <span class="token comment">// node.source.value的值就是&#39;./message.js&#39;</span>
      dependencies<span class="token punctuation">[</span>node<span class="token punctuation">.</span>source<span class="token punctuation">.</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>source<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> dependencies
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> findRequire
</code></pre></div><p>👇 用babel把业务代码的import转为require输出</p><div class="language-js"><pre><code><span class="token comment">// 用babel 把业务代码的import转为require输出</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> transformFromAst <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">transformFromAst</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>到这里我们只是通过babel把入口文件转成AST来收集入口文件的依赖而已</p><p>我们还要递归入口文件的子依赖转成AST来收集其依赖</p><p>这里我们选择广度优先的递归(队列)</p><p>如👇 <code>deepRequire()</code></p><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Compiler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> entry<span class="token punctuation">,</span> output <span class="token punctuation">}</span> <span class="token operator">=</span> options <span class="token comment">// webpack 配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>entry <span class="token operator">=</span> entry <span class="token comment">// 入口</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>output <span class="token operator">=</span> output <span class="token comment">// 出口</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 模块</span>
  <span class="token punctuation">}</span>
  <span class="token function">parse</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token function">getAst</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">// 入口文件的ast</span>
    <span class="token keyword">const</span> dependencies <span class="token operator">=</span> <span class="token function">findRequire</span><span class="token punctuation">(</span>ast<span class="token punctuation">)</span> <span class="token comment">// 收集：遍历ast来识别require等引入资源(不影响原代码)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">transformFromAst</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> dependencies<span class="token punctuation">,</span> <span class="token literal-property property">fileName</span><span class="token operator">:</span>path <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">deepRequire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> module <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> dirname <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> module<span class="token punctuation">.</span>dependencies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> absolutePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获得子依赖（子模块）的依赖项、代码、模块id，文件名</span>
        <span class="token keyword">const</span> childMoule <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将子依赖也加入队列中，广度遍历</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>childMoule<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 构建启动</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entry<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 入口文件模块信息</span>
    <span class="token function">deepRequire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样每个父模块的信息中就带着子模块的路径 而子模块对象则拍扁在了模块列表中</p><p>最后我们遍历所有模块注入require(包装一层),并整合起来</p><div class="language-js"><pre><code><span class="token comment">// setRequire.js</span>
<span class="token comment">// 包装函数注入require</span>
<span class="token keyword">function</span> <span class="token function">setRequire</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>module<span class="token punctuation">.</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;: function (require, module, exports){
      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>module<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    },
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> setRequire

<span class="token comment">// index.js</span>
<span class="token keyword">function</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> modulesString <span class="token operator">=</span> <span class="token string">&#39;&#39;</span> <span class="token comment">// 作为参数的模块列表-因为是写入文件的内容，因此是个字符串</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> module <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    modulesString <span class="token operator">+=</span> <span class="token function">setRequire</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token comment">// 注入：给所有模块注入require等参数实现浏览器支持CMD</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> modulesString
<span class="token punctuation">}</span>
</code></pre></div><p>包装成立即执行函数</p><div class="language-js"><pre><code><span class="token comment">// generate.js</span>
<span class="token comment">// 合并处理后的模块写入一个输出文件中</span>
<span class="token keyword">function</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token parameter">modules<span class="token punctuation">,</span>entryPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
(function(modules){
  //创建require函数， 它接受一个模块ID（这个模块id是数字0，1，2） ，它会在我们上面定义 modules 中找到对应是模块.
  function require(fileName){
    const module = modules[fileName];
    const module = {exports:{}};
    //执行每个模块的代码。
    fn(require,module,module.exports);
    return module.exports;
  }
  //执行入口文件，
  require(&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;);
})({</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>modules<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">})
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> generate
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// outputFile.js</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">outputFile</span><span class="token punctuation">(</span><span class="token parameter">fileContent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// console.log(fileContent)</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;./main.js&quot;</span><span class="token punctuation">,</span> fileContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> outputFile
</code></pre></div><p>👇 最终的class类</p><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>transformFromAst<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getAst <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./getAst.js&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> findRequire <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./findRequire.js&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> outputFile <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./outputFile.js&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> setRequire <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./setRequire.js&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> generate <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./generate&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Compiler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> entry<span class="token punctuation">,</span> output <span class="token punctuation">}</span> <span class="token operator">=</span> options <span class="token comment">// webpack 配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>entry <span class="token operator">=</span> entry <span class="token comment">// 入口</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>output <span class="token operator">=</span> output <span class="token comment">// 出口</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 模块</span>
  <span class="token punctuation">}</span>
  <span class="token function">parse</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token function">getAst</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">// 入口文件的ast</span>
    <span class="token keyword">const</span> dependencies <span class="token operator">=</span> <span class="token function">findRequire</span><span class="token punctuation">(</span>ast<span class="token punctuation">)</span> <span class="token comment">// 收集：遍历ast来识别require等引入资源(不影响原代码)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">transformFromAst</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token punctuation">,</span>dependencies<span class="token punctuation">,</span><span class="token literal-property property">fileName</span><span class="token operator">:</span>path<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">deepRequire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> module <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> dirname <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> module<span class="token punctuation">.</span>dependencies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> absolutePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获得子依赖（子模块）的依赖项、代码、模块id，文件名</span>
        <span class="token keyword">const</span> childMoule <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将子依赖也加入队列中，广度遍历</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>childMoule<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> modulesString <span class="token operator">=</span> <span class="token string">&#39;&#39;</span> <span class="token comment">// 作为参数的模块列表-因为是写入文件的内容，因此是个字符串</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> module <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      modulesString <span class="token operator">+=</span> <span class="token function">setRequire</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token comment">// 注入：给所有模块注入require等参数实现浏览器支持CMD</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> modulesString
  <span class="token punctuation">}</span>
  <span class="token comment">// 构建启动</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>entry<span class="token punctuation">)</span> <span class="token comment">// 入口依赖分析</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deepRequire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 入口依赖递归分析</span>
    
    <span class="token keyword">const</span> moduleListString <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 包装所有依赖模块</span>
    <span class="token keyword">const</span> fileRes <span class="token operator">=</span> <span class="token function">generate</span><span class="token punctuation">(</span>moduleListString<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>entry<span class="token punctuation">)</span><span class="token comment">// 合并写入一个输出文件中</span>
    <span class="token function">outputFile</span><span class="token punctuation">(</span>fileRes<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们运行<code>node build/index.js</code> 后生成出了整合后的js</p><p>我们直接运行生成出来的js文件，发现报错找不到资源 这是因为我们modules的key值是转化后的绝对路径，而业务代码写的是相对路径 因此用相对路径作为key去匹配模块，将找不到资源 <img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220320234256.png" alt=""> 你可能会说，那我们就用业务代码的相对路径做key存成modules不就行了吗？</p><p>相对路径是会冲突的，我们只有用绝对路径做key才能是准确的资源标识</p><ul><li>webpack5 会把业务代码的相对路径改写为绝对路径</li><li>TODO: webpack4 好像是用自增ID来匹配资源而不是资源路径</li></ul><p>问题出在唯一标识不匹配上</p><p>解决办法1</p><p>我们现在的模块列表是 <code>&#39;path&#39;:function(){}</code> 我们改为 <code>&#39;path&#39;: {code:function(){}, dependencies:{}}</code></p><p>如👇</p><div class="language-js"><pre><code><span class="token comment">// 深度扫描识别require等引入资源</span>
<span class="token keyword">function</span> <span class="token function">findRequire</span><span class="token punctuation">(</span><span class="token parameter">ast<span class="token punctuation">,</span> parentPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dirname <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>parentPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dependencies <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">//遍历当前ast（抽象语法树）</span>
  <span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//找到有 import语法 的对应节点</span>
    <span class="token function-variable function">ImportDeclaration</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//例如 如果当前js文件 有一句 import a from &#39;./a.js&#39;， </span>
      dependencies<span class="token punctuation">[</span>node<span class="token punctuation">.</span>source<span class="token punctuation">.</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> node<span class="token punctuation">.</span>source<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> dependencies
<span class="token punctuation">}</span>
</code></pre></div><p>在注入的require中用业务代码的相对路径去匹配 <code>dependencies</code> 出真实绝对路径</p><p>👇 这是一种运行时的思路</p><div class="language-js"><pre><code><span class="token comment">// 合并处理后的模块写入一个输出文件中</span>
<span class="token keyword">function</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token parameter">modules<span class="token punctuation">,</span>entryPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
(function(modules){
  function require(fileName) {
    const { dependencies,code } =  modules[fileName]
    // 要注入的真正require，包装了一层带上缓存的(闭包)
    function realRequire(relativePath) {
      return require(dependencies[relativePath])
    }
    const module = {exports:{}};
    //执行每个模块的代码。
    code(realRequire,module,module.exports);
    return module.exports;
  }
  //执行入口文件，
  require(&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;);
})({</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>modules<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">})
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> generate
</code></pre></div><p>解决办法2</p><p>想在不动业务代码的前提下匹配上，通过一层枚举来中转匹配 这是编译时的思路 TODO:</p><hr><p>思考🤔: <code>webpack</code> 只实现让浏览器支持CJS的模块化打包而已,把很多功能都通过 <code>loader</code> 和 <code>plugin</code>开放出去了，为什么<code>纯webpack</code>还会这么重呢(因为工程庞大,依赖文件多？)</p><p>源码复杂的原因是配置多，并且配置支持的类型多，这样处理1个配置项写起来就很复杂 另外 <code>webpack</code> 还有很多很重要的功能是内置的，如 <code>热更新HMR、sourceMap、代码分割</code>等</p><hr><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h2><p><code>webpack</code> 实现浏览器识别业务代码中的模块化，是通过合并到一个文件中，并通过注入 <code>require</code> 的CJS实现模块化</p><p>难点在于👇</p><ul><li>把文件内容转化为<code>AST树</code>,收集模块化语法,也就是开发阶段使用的<code>nodejs</code>的<code>CMD/AMD语法</code></li><li>根据收集到的<code>AST树</code>,通过包装一层<code>注入方法</code>的形式，实现模块化(跟<code>nodejs</code>一致)</li><li>把收集到的依赖列表，整合到一起，通过<code>运行时方法</code>运行指定资源</li></ul><p>我们还提到了一点运行时和编译时的概念，我们后续的分析也希望带着这是在运行时做的还是在编译时做的，各有什么优缺点的问题来学习</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/webpack/重学webpack-01打包工具的思考" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>重学webpack-01打包工具的思考</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/webpack/重学webpack-03loader" data-v-38ede35f><span class="text" data-v-38ede35f>重学webpack-03loader</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"http_http2.md\":\"61f372f8\",\"http_http3.md\":\"f4eae4a7\",\"http_http缓存.md\":\"90dfc416\",\"index.md\":\"7cd664a4\",\"innermanage_内管前端工程.md\":\"2e5b87fc\",\"interview_js基础.md\":\"f3b76f1b\",\"interview_todo.md\":\"a4bea80d\",\"interview__过.md\":\"ad46898e\",\"interview_前端面试之道.md\":\"29e10a7b\",\"interview_各种题目01.md\":\"336c3f0f\",\"interview_手写系列-callbind.md\":\"1a27c36e\",\"interview_手写系列-instanceof.md\":\"5a89338b\",\"interview_手写系列-map和filter和reduce.md\":\"4b19ddd8\",\"interview_手写系列-new原理.md\":\"bb803aa9\",\"interview_手写系列-settime模拟setinterval.md\":\"f315b518\",\"interview_手写系列-发布订阅和观察者.md\":\"f6b28385\",\"interview_手写系列-复杂axios.md\":\"fafdf239\",\"interview_手写系列-复杂promise.md\":\"41f7e308\",\"interview_手写系列-数组转树.md\":\"75c9efc8\",\"interview_手写系列-深拷贝.md\":\"3d378cc3\",\"interview_手写系列-防抖节流.md\":\"621af863\",\"interview_算法01.md\":\"d9c4b61a\",\"jiagou_monorepo.md\":\"725693ea\",\"jiagou_从0到1构建符合标准的公共库.md\":\"4db26899\",\"jiagou_切换主题方案.md\":\"1c6f7cc6\",\"jiagou_前端基础建设与架构30讲.md\":\"545c2f4d\",\"jiagou_搭建组件库.md\":\"75b6105a\",\"jiagou_深入babel.md\":\"98134c12\",\"jiagou_自动生成按需导出目录.md\":\"a0a99e5b\",\"jiagou_表单组件带校验功能.md\":\"037e52c3\",\"js_object.entries.md\":\"d7ef83a2\",\"js_class和构造函数.md\":\"e1c68545\",\"js_dayformat正则的使用.md\":\"da3c8fb2\",\"js_luhn算法.md\":\"1a42337b\",\"js_proxy.md\":\"6ff1ec19\",\"js_优雅的class.md\":\"3df6be82\",\"js_前端模块化.md\":\"9e7f6ead\",\"js_浏览器垃圾回收.md\":\"e21a3e55\",\"js_深入babel.md\":\"52722ee7\",\"js_闭包与垃圾回收.md\":\"749b2ff1\",\"microfrontend_介绍.md\":\"580a3921\",\"microfrontend_拟定微前端架构设计.md\":\"ff7f9528\",\"microfrontend_架构思想.md\":\"08afff96\",\"node_cheetah-learn.md\":\"03f4cd07\",\"node_cli相关学习.md\":\"5b8b30ed\",\"performance_serviceworker.md\":\"8daffe4c\",\"performance_ssr.md\":\"a4ce6081\",\"performance_慕课网web性能优化.md\":\"b9f642c2\",\"typescript_vue2加ts.md\":\"4dfc1521\",\"vue_create-vue脚手架.md\":\"0eba574d\",\"vue_esbuild使用.md\":\"e068bb0d\",\"vue_keep-alive原理.md\":\"44c46c5f\",\"vue_vue-router实现原理.md\":\"1d2621c4\",\"vue_模板编译.md\":\"482e2dc9\",\"vue_路由页面历史栈的处理.md\":\"f827e2a6\",\"vue_重学vue-01模板语法.md\":\"69d88a08\",\"vue_重学vue-02数据驱动视图.md\":\"c681bf73\",\"vue_重学vue-03render函数.md\":\"477b8cdc\",\"vue_重学vue-04内置指令.md\":\"d05b23f6\",\"vue_重学vue-05filter多余吗.md\":\"583eb11a\",\"vue_重学vue-06computer.md\":\"2085b276\",\"vue_重学vue-07watch.md\":\"915b128f\",\"vue_重学vue-08组件.md\":\"1a9f134f\",\"vue_重学vue-09生命周期.md\":\"a715abeb\",\"vue_重学vue-10ref是什么.md\":\"8043a67e\",\"vue_重学vue-11nexttick.md\":\"c1eba6cc\",\"vue_重学vue-8组件通信.md\":\"fe312913\",\"vue_重学vue-vue.use.md\":\"2adddb6d\",\"vue_重学vue-动画内置组件.md\":\"f35266d9\",\"vue3_elementplus.md\":\"474cd264\",\"vue3_入门.md\":\"3cbb2de8\",\"webcomponents_1. webcomponent介绍.md\":\"6dd880b3\",\"webcomponents_2. customelements.md\":\"e890e63a\",\"webpack_1.md\":\"19710796\",\"webpack__草稿.md\":\"a4521525\",\"webpack_实现一个自己的脚手架.md\":\"3a0dcb1e\",\"webpack_重学webpack-01打包工具的思考.md\":\"dc8f4b90\",\"webpack_重学webpack-02模块化原理.md\":\"be9e501e\",\"webpack_重学webpack-03loader.md\":\"34f09632\",\"webpack_重学webpack-04plugin.md\":\"bc5707c3\",\"webpack_重学webpack-05hmr热更新.md\":\"9368db44\",\"week_202110-1.md\":\"66b9ab24\",\"week_202110-2.md\":\"5bcee2e2\",\"week_202111-1.md\":\"72fb7b6d\",\"week__0todo.md\":\"271b539a\",\"week_缓存工具方法思路.md\":\"fdb57aa6\",\"work_ios小白条问题.md\":\"5d8a3aac\"}")</script>
    <script type="module" async src="/assets/app.d95e124d.js"></script>
    
  </body>
</html>