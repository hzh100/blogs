<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Custom Elements | blog</title>
    <meta name="description" content="vueã€jsã€nodejsç­‰ç­‰çš„å­¦ä¹ è®°å½•">
    <link rel="stylesheet" href="/assets/style.49eed234.css">
    <link rel="modulepreload" href="/assets/Home.ae65bc00.js">
    <link rel="modulepreload" href="/assets/app.d95e124d.js">
    <link rel="modulepreload" href="/assets/webComponents_2. customElements.md.9e1088a3.lean.js">
    
    <meta name="twitter:title" content="Custom Elements | blog">
  <meta property="og:title" content="Custom Elements | blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="blog, back to home" data-v-675d8756 data-v-cc01ef16><!----> blog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://gitee.com/hzh100" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>gitee <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"> ä»‹ç»</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/">ä»‹ç»</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">http</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http2">http2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/http3">http3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http/httpç¼“å­˜">httpç¼“å­˜</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">innermanage</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/innermanage/å†…ç®¡å‰ç«¯å·¥ç¨‹">å†…ç®¡å‰ç«¯å·¥ç¨‹</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">interview</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/JSåŸºç¡€">JSåŸºç¡€</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/TODO">TODO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/å‰ç«¯é¢è¯•ä¹‹é“">å‰ç«¯é¢è¯•ä¹‹é“</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/å„ç§é¢˜ç›®01">å„ç§é¢˜ç›®01</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-callbind">æ‰‹å†™ç³»åˆ—-callbind</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-instanceof">æ‰‹å†™ç³»åˆ—-instanceof</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-mapå’Œfilterå’Œreduce">æ‰‹å†™ç³»åˆ—-mapå’Œfilterå’Œreduce</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-newåŸç†">æ‰‹å†™ç³»åˆ—-newåŸç†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-setTimeæ¨¡æ‹ŸsetInterval">æ‰‹å†™ç³»åˆ—-setTimeæ¨¡æ‹ŸsetInterval</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-å‘å¸ƒè®¢é˜…å’Œè§‚å¯Ÿè€…">æ‰‹å†™ç³»åˆ—-å‘å¸ƒè®¢é˜…å’Œè§‚å¯Ÿè€…</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-å¤æ‚axios">æ‰‹å†™ç³»åˆ—-å¤æ‚axios</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-å¤æ‚promise">æ‰‹å†™ç³»åˆ—-å¤æ‚promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-æ•°ç»„è½¬æ ‘">æ‰‹å†™ç³»åˆ—-æ•°ç»„è½¬æ ‘</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-æ·±æ‹·è´">æ‰‹å†™ç³»åˆ—-æ·±æ‹·è´</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/æ‰‹å†™ç³»åˆ—-é˜²æŠ–èŠ‚æµ">æ‰‹å†™ç³»åˆ—-é˜²æŠ–èŠ‚æµ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/ç®—æ³•01">ç®—æ³•01</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">jiagou</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/monorepo">monorepo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/ä»0åˆ°1æ„å»ºç¬¦åˆæ ‡å‡†çš„å…¬å…±åº“">ä»0åˆ°1æ„å»ºç¬¦åˆæ ‡å‡†çš„å…¬å…±åº“</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/åˆ‡æ¢ä¸»é¢˜æ–¹æ¡ˆ">åˆ‡æ¢ä¸»é¢˜æ–¹æ¡ˆ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/å‰ç«¯åŸºç¡€å»ºè®¾ä¸æ¶æ„30è®²">å‰ç«¯åŸºç¡€å»ºè®¾ä¸æ¶æ„30è®²</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/æ­å»ºç»„ä»¶åº“">æ­å»ºç»„ä»¶åº“</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/æ·±å…¥babel">æ·±å…¥babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/è‡ªåŠ¨ç”ŸæˆæŒ‰éœ€å¯¼å‡ºç›®å½•">è‡ªåŠ¨ç”ŸæˆæŒ‰éœ€å¯¼å‡ºç›®å½•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jiagou/è¡¨å•ç»„ä»¶å¸¦æ ¡éªŒåŠŸèƒ½">è¡¨å•ç»„ä»¶å¸¦æ ¡éªŒåŠŸèƒ½</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">js</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/js/classå’Œæ„é€ å‡½æ•°">classå’Œæ„é€ å‡½æ•°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/dayFormatæ­£åˆ™çš„ä½¿ç”¨">dayFormatæ­£åˆ™çš„ä½¿ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/luhnç®—æ³•">luhnç®—æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/Object.entries">Object.entries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/proxy">proxy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/ä¼˜é›…çš„Class">ä¼˜é›…çš„Class</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/å‰ç«¯æ¨¡å—åŒ–">å‰ç«¯æ¨¡å—åŒ–</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/æµè§ˆå™¨åƒåœ¾å›æ”¶">æµè§ˆå™¨åƒåœ¾å›æ”¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/æ·±å…¥babel">æ·±å…¥babel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js/é—­åŒ…ä¸åƒåœ¾å›æ”¶">é—­åŒ…ä¸åƒåœ¾å›æ”¶</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">microFrontend</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/ä»‹ç»">ä»‹ç»</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/æ‹Ÿå®šå¾®å‰ç«¯æ¶æ„è®¾è®¡">æ‹Ÿå®šå¾®å‰ç«¯æ¶æ„è®¾è®¡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/microFrontend/æ¶æ„æ€æƒ³">æ¶æ„æ€æƒ³</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">node</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cheetah-learn">cheetah-learn</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/cliç›¸å…³å­¦ä¹ ">cliç›¸å…³å­¦ä¹ </a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">performance</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/serviceWorker">serviceWorker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/ssr">ssr</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/performance/æ…•è¯¾ç½‘webæ€§èƒ½ä¼˜åŒ–">æ…•è¯¾ç½‘webæ€§èƒ½ä¼˜åŒ–</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">typescript</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript/vue2åŠ ts">vue2åŠ ts</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/create-vueè„šæ‰‹æ¶">create-vueè„šæ‰‹æ¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/esbuildä½¿ç”¨">esbuildä½¿ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/keep-aliveåŸç†">keep-aliveåŸç†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/vue-routerå®ç°åŸç†">vue-routerå®ç°åŸç†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/æ¨¡æ¿ç¼–è¯‘">æ¨¡æ¿ç¼–è¯‘</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/è·¯ç”±é¡µé¢å†å²æ ˆçš„å¤„ç†">è·¯ç”±é¡µé¢å†å²æ ˆçš„å¤„ç†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-01æ¨¡æ¿è¯­æ³•">é‡å­¦vue-01æ¨¡æ¿è¯­æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-02æ•°æ®é©±åŠ¨è§†å›¾">é‡å­¦vue-02æ•°æ®é©±åŠ¨è§†å›¾</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-03renderå‡½æ•°">é‡å­¦vue-03renderå‡½æ•°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-04å†…ç½®æŒ‡ä»¤">é‡å­¦vue-04å†…ç½®æŒ‡ä»¤</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-05filterå¤šä½™å—">é‡å­¦vue-05filterå¤šä½™å—</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-06computer">é‡å­¦vue-06computer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-07watch">é‡å­¦vue-07watch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-08ç»„ä»¶">é‡å­¦vue-08ç»„ä»¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-09ç”Ÿå‘½å‘¨æœŸ">é‡å­¦vue-09ç”Ÿå‘½å‘¨æœŸ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-10refæ˜¯ä»€ä¹ˆ">é‡å­¦vue-10refæ˜¯ä»€ä¹ˆ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-11nextTick">é‡å­¦vue-11nextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-8ç»„ä»¶é€šä¿¡">é‡å­¦vue-8ç»„ä»¶é€šä¿¡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-vue.use">é‡å­¦vue-vue.use</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue/é‡å­¦vue-åŠ¨ç”»å†…ç½®ç»„ä»¶">é‡å­¦vue-åŠ¨ç”»å†…ç½®ç»„ä»¶</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">vue3</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/elementPlus">elementPlus</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vue3/å…¥é—¨">å…¥é—¨</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webComponents</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webComponents/1. webComponentä»‹ç»">1. webComponentä»‹ç»</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/webComponents/2. customElements">2. customElements</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#custom-elements">Custom Elements</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»§æ‰¿å…¶ä»–web-components">ç»§æ‰¿å…¶ä»–web Components</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¸ºä»€ä¹ˆå¼ºåˆ¶è¦æ±‚å‘½åå¸¦">ä¸ºä»€ä¹ˆå¼ºåˆ¶è¦æ±‚å‘½åå¸¦-</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¼ªç±»é€‰æ‹©å™¨-é€‰ä¸­æœªå®šä¹‰çš„è‡ªå®šä¹‰æ ‡ç­¾">ä¼ªç±»é€‰æ‹©å™¨ é€‰ä¸­æœªå®šä¹‰çš„è‡ªå®šä¹‰æ ‡ç­¾</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#customelements-whendefined">customElements.whenDefined</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è‡ªå®šä¹‰æ ‡ç­¾ç”Ÿå‘½å‘¨æœŸ">è‡ªå®šä¹‰æ ‡ç­¾ç”Ÿå‘½å‘¨æœŸ</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#connectedcallback">connectedCallback</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#disconnectedcallback">disconnectedCallback</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#adoptedcallback">adoptedCallback</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#attributechangedcallback">attributeChangedCallback</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»§æ‰¿å…¶ä»–åŸç”Ÿå…ƒç´ dom">ç»§æ‰¿å…¶ä»–åŸç”Ÿå…ƒç´ dom</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å‚è€ƒææ–™">å‚è€ƒææ–™</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">webpack</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/1">1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/å®ç°ä¸€ä¸ªè‡ªå·±çš„è„šæ‰‹æ¶">å®ç°ä¸€ä¸ªè‡ªå·±çš„è„šæ‰‹æ¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/é‡å­¦webpack-01æ‰“åŒ…å·¥å…·çš„æ€è€ƒ">é‡å­¦webpack-01æ‰“åŒ…å·¥å…·çš„æ€è€ƒ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/é‡å­¦webpack-02æ¨¡å—åŒ–åŸç†">é‡å­¦webpack-02æ¨¡å—åŒ–åŸç†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/é‡å­¦webpack-03loader">é‡å­¦webpack-03loader</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/é‡å­¦webpack-04plugin">é‡å­¦webpack-04plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webpack/é‡å­¦webpack-05HMRçƒ­æ›´æ–°">é‡å­¦webpack-05HMRçƒ­æ›´æ–°</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">week</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-1">202110-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202110-2">202110-2</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/202111-1">202111-1</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/week/ç¼“å­˜å·¥å…·æ–¹æ³•æ€è·¯">ç¼“å­˜å·¥å…·æ–¹æ³•æ€è·¯</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">work</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/work/ioså°ç™½æ¡é—®é¢˜">ioså°ç™½æ¡é—®é¢˜</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h2 id="custom-elements" tabindex="-1">Custom Elements <a class="header-anchor" href="#custom-elements" aria-hidden="true">#</a></h2><blockquote><p>è‡ªå®šä¹‰å…ƒç´  åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰å…ƒç´  <code>if( &#39;customElements&#39; in window )</code></p></blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/customElements" target="_blank" rel="noopener noreferrer">customElements</a> æ˜¯ä¸€ä¸ªæµè§ˆå™¨windowä¸‹çš„å…¨å±€å˜é‡å·¥å…·</p><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220515112510.png" alt=""></p><p>ç¬¬äºŒä¸ªå‚æ•°æ¥æ”¶ä¸€ä¸ªclassç±»ï¼Œè¿™ä¸ªclassç±»è¦ç»§æ‰¿å…ƒç´ æ„é€ å™¨ <code>class extends HTMLElement { }</code></p><h3 id="ç»§æ‰¿å…¶ä»–web-components" tabindex="-1">ç»§æ‰¿å…¶ä»–web Components <a class="header-anchor" href="#ç»§æ‰¿å…¶ä»–web-components" aria-hidden="true">#</a></h3><p>å‡å¦‚æˆ‘ä»¬è¦äºŒæ¬¡å°è£…åˆ«äººçš„ <code>Web Components</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå®šä¹‰å…ƒç´ ååï¼Œç»§æ‰¿åŸ <code>Web Components</code></p><p>ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CustomElementRegistry/get" target="_blank" rel="noopener noreferrer">customElements.get( )</a> è·å–å·²ç»å®šä¹‰çš„åŸ <code>Web Components</code></p><p>å¦‚ğŸ‘‡</p><div class="language-js"><pre><code>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-p&#39;</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> customElements<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;origin-ui-p&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// æ­¤æ—¶å†™å…¥çš„thisæ“ä½œå°†æ˜¯åŸºäºåŸç»„ä»¶åšçš„é¢å¤–æ“ä½œ</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;åŸºäºåŸç»„ä»¶çš„é¢å¤–ç‚¹å‡»äº‹ä»¶&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ä¸ºä»€ä¹ˆå¼ºåˆ¶è¦æ±‚å‘½åå¸¦" tabindex="-1">ä¸ºä»€ä¹ˆå¼ºåˆ¶è¦æ±‚å‘½åå¸¦- <a class="header-anchor" href="#ä¸ºä»€ä¹ˆå¼ºåˆ¶è¦æ±‚å‘½åå¸¦" aria-hidden="true">#</a></h3><p>æµè§ˆå™¨è§£æhtmlï¼Œä»ä¸Šå¾€ä¸‹æ‰§è¡Œï¼Œæˆ‘ä»¬å¸¸å¸¸è¦æ±‚åœ¨domå…ƒç´ å‰å…ˆå¼•å…¥cssèµ„æºï¼Œåœ¨domå…ƒç´ åå¼•å…¥jsèµ„æºï¼Œæ˜¯ä¸ºäº†è®©é¡µé¢åœ¨æ— è§†jså…ˆæ¸²æŸ“å‡ºå†…å®¹</p><blockquote><p>é‚£ä¹ˆå½“å‡ºç°äº†jså®šä¹‰çš„è‡ªå®šä¹‰å…ƒç´ æ ‡ç­¾æ—¶ï¼Œjsè¿˜èƒ½å†™åœ¨domå…ƒç´ åé¢å—ï¼Ÿ æ˜¯å¯ä»¥çš„</p></blockquote><p>htmlé‡åˆ°å¸¦ <code>-</code> çš„æ ‡ç­¾ï¼Œå¹¶ä¸”ä¸æ˜¯åŸç”Ÿæ ‡ç­¾å°†ä¼šè·³è¿‡æ¸²æŸ“å¹¶è®¤ä¸ºæ˜¯æœªå®šä¹‰çš„æ ‡ç­¾ï¼Œè€Œä¸æ˜¯æŠ¥é”™ è€Œä¸å¸¦ <code>-</code> çš„æ ‡ç­¾å°†ä¸€å¾‹è®¤ä¸ºæ˜¯åŸç”Ÿæ ‡ç­¾ï¼Œå¦‚æœæ˜¯ä¸è®¤è¯†çš„æ ‡ç­¾å°†ä¼šæŠ¥é”™</p><h3 id="ä¼ªç±»é€‰æ‹©å™¨-é€‰ä¸­æœªå®šä¹‰çš„è‡ªå®šä¹‰æ ‡ç­¾" tabindex="-1">ä¼ªç±»é€‰æ‹©å™¨ é€‰ä¸­æœªå®šä¹‰çš„è‡ªå®šä¹‰æ ‡ç­¾ <a class="header-anchor" href="#ä¼ªç±»é€‰æ‹©å™¨-é€‰ä¸­æœªå®šä¹‰çš„è‡ªå®šä¹‰æ ‡ç­¾" aria-hidden="true">#</a></h3><blockquote><p>ä¸Šé¢è¯´åˆ°æµè§ˆå™¨ä¼šè·³è¿‡æ¸²æŸ“æœªå®šä¹‰çš„æ ‡ç­¾ è¿™é‡Œæœ‰ä¸ªä¼ªç±»é€‰æ‹©å™¨å¯ä»¥é€‰ä¸­å·²å®šä¹‰çš„å…ƒç´ æ ‡ç­¾ <code>:defined { }</code> ï¼Œè¿›è¡Œæ ·å¼ç¼–å†™</p></blockquote><p>é‚£ä¹ˆå‡å¦‚æˆ‘ä»¬è¦é€‰ä¸­æœªå®šä¹‰çš„å…ƒç´ æ ‡ç­¾(è‡ªå®šä¹‰å…ƒç´ ) <code>:not(:defined) {}</code></p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç»™è¿™ä¸ª <code>Web Components</code> åšä¸€ä¸ªåŠ è½½æ•ˆæœ</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">body</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span> <span class="token property">place-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token selector">:not(:defined)</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> gray <span class="token function">linear-gradient</span><span class="token punctuation">(</span>60deg<span class="token punctuation">,</span> transparent<span class="token punctuation">,</span> transparent 20%<span class="token punctuation">,</span> white 40%<span class="token punctuation">,</span> transparent 60%<span class="token punctuation">)</span> 0/300%<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
        <span class="token property">animation</span><span class="token punctuation">:</span> loading 2s infinite<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token atrule"><span class="token rule">@keyframes</span> loading</span> <span class="token punctuation">{</span>
        <span class="token selector">to</span> <span class="token punctuation">{</span> <span class="token property">background-position</span><span class="token punctuation">:</span> 300% 0 <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-p&#39;</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span>
          <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&lt;p&gt;Web Components&lt;/p&gt;&#39;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ•ˆæœå¦‚ğŸ‘‡ <img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/webcomponents.gif" alt=""></p><h2 id="customelements-whendefined" tabindex="-1">customElements.whenDefined <a class="header-anchor" href="#customelements-whendefined" aria-hidden="true">#</a></h2><blockquote><p>ğŸ‘† å·²ç»ç”¨åˆ°äº† <code>customElements</code>ä¸Šçš„<code>defind</code>æ–¹æ³•åˆ›å»ºå®šä¹‰è‡ªå®šä¹‰æ ‡ç­¾ï¼Œå®ƒè¿˜æœ‰å…¶ä»–çš„å‡ ä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨ å› ä¸ºä¸ç®—å¸¸ç”¨ï¼Œæš‚æ—¶å…ˆä¸ä»”ç»†ç ”ç©¶ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿä¸ç®—è¯¦ç»†ï¼Œå…ˆæœ‰ä¸ªå°è±¡</p></blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CustomElementRegistry/whenDefined" target="_blank" rel="noopener noreferrer">customElements.whenDefined( )</a></p><h2 id="è‡ªå®šä¹‰æ ‡ç­¾ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">è‡ªå®šä¹‰æ ‡ç­¾ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#è‡ªå®šä¹‰æ ‡ç­¾ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a></h2><div class="language-js"><pre><code>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-p&#39;</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span>
  <span class="token comment">// ç›¸å½“äºvue3çš„setup</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&lt;p&gt;Web Components&lt;/p&gt;&#39;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç›¸å½“äºvueçš„mounted</span>
  <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;connectedCallback&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç›¸å½“äºvue3çš„unmounted</span>
  <span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;disconnectedCallback&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">adoptedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;adoptedCallback&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="connectedcallback" tabindex="-1">connectedCallback <a class="header-anchor" href="#connectedcallback" aria-hidden="true">#</a></h3><blockquote><p>å½“ WebComponents ç¬¬ä¸€æ¬¡è¢«æŒ‚åœ¨åˆ° dom ä¸Šæ˜¯è§¦å‘çš„é’©å­ï¼Œå¹¶ä¸”åªä¼šè§¦å‘ä¸€æ¬¡ã€‚ç±»ä¼¼ Vue ä¸­çš„ mounted React ä¸­çš„ useEffect(() =&gt; {}, [])ï¼ŒcomponentDidMountã€‚</p></blockquote><h3 id="disconnectedcallback" tabindex="-1">disconnectedCallback <a class="header-anchor" href="#disconnectedcallback" aria-hidden="true">#</a></h3><blockquote><p>å½“è‡ªå®šä¹‰å…ƒç´ ä¸æ–‡æ¡£ DOM æ–­å¼€è¿æ¥æ—¶è¢«è°ƒç”¨ã€‚</p></blockquote><h3 id="adoptedcallback" tabindex="-1">adoptedCallback <a class="header-anchor" href="#adoptedcallback" aria-hidden="true">#</a></h3><blockquote><p>adopted: æ”¶å…»ã€é‡‡ç”¨ å½“è‡ªå®šä¹‰å…ƒç´ è¢«ç§»åŠ¨åˆ°æ–°æ–‡æ¡£æ—¶è¢«è°ƒç”¨</p></blockquote><p>å¦‚åœ¨ domæ“ä½œè¿è¡Œæˆ‘ä»¬ç§»åŠ¨iframeçš„å…ƒç´ åˆ°ä¸»æ–‡æ¡£document <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/adoptNode" target="_blank" rel="noopener noreferrer">Document.adoptNode( ) -MDN</a> æ•ˆæœç±»ä¼¼å‰ªåˆ‡ æ­¤æ—¶å‰ªåˆ‡çš„domå…ƒç´ æ˜¯è‡ªå®šä¹‰å…ƒç´ æ ‡ç­¾çš„è¯ï¼Œå°†ä¼šè§¦å‘è‡ªå®šä¹‰æ ‡ç­¾çš„<code>adoptedCallback</code>ç”Ÿå‘½å‘¨æœŸ</p><h2 id="attributechangedcallback" tabindex="-1">attributeChangedCallback <a class="header-anchor" href="#attributechangedcallback" aria-hidden="true">#</a></h2><blockquote><p>attributeChangedCallback ä¹Ÿæ˜¯è‡ªå®šä¹‰è‡ªå®šä¹‰å±æ€§çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯æˆ‘ä»¬å•ç‹¬æ¥çœ‹ å­—é¢æ„æ€ï¼Œå±æ€§å˜åŒ–æ—¶è§¦å‘ ç±»ä¼¼vueçš„watch æ³¨æ„å®ƒä¸æ˜¯å…ƒç´ çš„prop æ³¨æ„å®ƒçš„è§¦å‘æ—¶æœºæ¯”<code>connectedCallback</code>æŒ‚è½½è¦æ—©,å¯ä»¥ç”¨<code>oldVal</code>æœ‰æ²¡æœ‰å€¼åˆ¤æ–­æ˜¯å¦æœªæŒ‚è½½</p></blockquote><p>æœ¬ç”Ÿå‘½å‘¨æœŸèµ·ä½œç”¨çš„å‰ææ˜¯å…ˆå®šä¹‰éœ€è¦ç›‘å¬çš„å±æ€§å<code>static get observedAttributes()</code>ï¼Œå› ä¸ºæ ‡ç­¾ä¸Šçš„é¢„ç½®å±æ€§æ˜¯éå¸¸å¤šçš„ è¿™æ ·çš„å†™æ³•å°±ä¼šéå¸¸åƒvueçš„watchç”Ÿæ•ˆéœ€è¦å…ˆåœ¨dataå£°æ˜</p><p>ğŸ‘‡ å®ç° <code>input</code> å±æ€§çš„ <code>placeholder</code></p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·è¾“å…¥<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-input&#39;</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span>
      <span class="token comment">// ç±»ä¼¼vueçš„watchç›‘å¬å‰éœ€è¦åœ¨dataä¸­å£°æ˜</span>
      <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;placeholder&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token comment">// è¿™ä¸ªsetæ˜¯ä¸ºäº†å®ç°ç›´æ¥æ“ä½œdom.placeholder = xx ä¹Ÿç”Ÿæ•ˆ</span>
      <span class="token comment">// ä¸åŠ è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™jsåªèƒ½é€šè¿‡dom.setAttribute()å®ç°ä¿®æ”¹</span>
      <span class="token keyword">set</span> <span class="token function">placeholder</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;placeholder&#39;</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&lt;input&gt;&#39;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// æŸ¥çœ‹attributeChangedCallback å’Œ connectedCallback é¡ºåº</span>
      <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;connectedCallback&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// å¯ä»¥ç”¨ oldVal æœ‰æ²¡æœ‰å€¼åˆ¤æ–­æ˜¯å¦æœªæŒ‚è½½</span>
      <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è§¦å‘attributeChangedCallback&#39;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#39;placeholder&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;placeholder&#39;</span><span class="token punctuation">,</span>newVal<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç»§æ‰¿å…¶ä»–åŸç”Ÿå…ƒç´ dom" tabindex="-1">ç»§æ‰¿å…¶ä»–åŸç”Ÿå…ƒç´ dom <a class="header-anchor" href="#ç»§æ‰¿å…¶ä»–åŸç”Ÿå…ƒç´ dom" aria-hidden="true">#</a></h2><p>ğŸ‘† çš„placeholderç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é€‰ä¸­å†…éƒ¨çš„çœŸå® input æ ‡ç­¾æ¥è®¾ç½®placeholder æˆ‘ä»¬ç°åœ¨å¸Œæœ›æˆ‘ä»¬çš„è‡ªå®šä¹‰æ ‡ç­¾å°±æ˜¯inputæ ‡ç­¾ï¼Œå®ƒè‡ªå¸¦ç€placeholderåŠŸèƒ½</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·è¾“å…¥<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-input&#39;</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLInputElement <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ğŸ‘†çš„è‡ªå®šä¹‰æ ‡ç­¾å®šä¹‰çš„æ—¶å€™ï¼Œä¸å†ç»§æ‰¿<code>HTMLElement</code> è€Œæ˜¯ <code>HTMLInputElement</code> å…¶ä»–å…·ä½“çš„æ ‡ç­¾éƒ½æ˜¯ç±»ä¼¼çš„åšæ³•ï¼Œä»–ä»¬çš„æœ¬è´¨éƒ½æ˜¯ç»§æ‰¿è‡ª <code>HTMLElement</code></p><p>å¹¶ä¸”éœ€è¦å†™ä¸Šç¬¬3ä¸ªå‚æ•°ï¼Œ <code>{ extends: &#39;input&#39; }</code></p><p>æ³¨æ„è¿™ç§å†™æ³•ï¼Œ<code>safari</code> ä¸æ”¯æŒ <a href="https://www.zhangxinxu.com/wordpress/2021/04/safari-buildin-custom-element-polyfill/" target="_blank" rel="noopener noreferrer">Safariä¸æ”¯æŒbuild-inè‡ªå®šä¹‰å…ƒç´ çš„å…¼å®¹å¤„ç†</a> å¼•å…¥ <code>polyfill</code> çš„ <code>custom-elements-builtin</code> jsåº“æ¥å…¼å®¹safariï¼Œä½†æ˜¯è¿˜æœ‰äº›ç»†å¾®æ“ä½œï¼Œè¯¦è§ğŸ‘†çš„æ–‡ç« </p><h2 id="å‚è€ƒææ–™" tabindex="-1">å‚è€ƒææ–™ <a class="header-anchor" href="#å‚è€ƒææ–™" aria-hidden="true">#</a></h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_custom_elements" target="_blank" rel="noopener noreferrer">customElements - MDN</a></li><li><a href="https://www.zoo.team/article/web-components" target="_blank" rel="noopener noreferrer">å¦‚ä½•åŸºäº WebComponents å°è£… UI ç»„ä»¶åº“ - æ”¿é‡‡äº‘</a></li><li><a href="https://www.zhangxinxu.com/wordpress/2021/04/safari-buildin-custom-element-polyfill/" target="_blank" rel="noopener noreferrer">Safariä¸æ”¯æŒbuild-inè‡ªå®šä¹‰å…ƒç´ çš„å…¼å®¹å¤„ç†</a></li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/webComponents/1. webComponentä»‹ç»" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>1. webComponentä»‹ç»</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/webpack/1" data-v-38ede35f><span class="text" data-v-38ede35f>1</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"http_http2.md\":\"f913a313\",\"http_http3.md\":\"060f1a93\",\"http_httpç¼“å­˜.md\":\"31fc5d76\",\"index.md\":\"e233a088\",\"innermanage_å†…ç®¡å‰ç«¯å·¥ç¨‹.md\":\"e613f30e\",\"interview_jsåŸºç¡€.md\":\"f3bc5865\",\"interview_todo.md\":\"199537bf\",\"interview__è¿‡.md\":\"865ff21e\",\"interview_å‰ç«¯é¢è¯•ä¹‹é“.md\":\"ec1a40c2\",\"interview_å„ç§é¢˜ç›®01.md\":\"079c680b\",\"interview_æ‰‹å†™ç³»åˆ—-callbind.md\":\"12930746\",\"interview_æ‰‹å†™ç³»åˆ—-instanceof.md\":\"5ef6c309\",\"interview_æ‰‹å†™ç³»åˆ—-mapå’Œfilterå’Œreduce.md\":\"7d9d2352\",\"interview_æ‰‹å†™ç³»åˆ—-newåŸç†.md\":\"a96cf990\",\"interview_æ‰‹å†™ç³»åˆ—-settimeæ¨¡æ‹Ÿsetinterval.md\":\"e387ac1a\",\"interview_æ‰‹å†™ç³»åˆ—-å‘å¸ƒè®¢é˜…å’Œè§‚å¯Ÿè€….md\":\"a516d630\",\"interview_æ‰‹å†™ç³»åˆ—-å¤æ‚axios.md\":\"ed7137b3\",\"interview_æ‰‹å†™ç³»åˆ—-å¤æ‚promise.md\":\"4e5735bb\",\"interview_æ‰‹å†™ç³»åˆ—-æ•°ç»„è½¬æ ‘.md\":\"c01229aa\",\"interview_æ‰‹å†™ç³»åˆ—-æ·±æ‹·è´.md\":\"79f771f4\",\"interview_æ‰‹å†™ç³»åˆ—-é˜²æŠ–èŠ‚æµ.md\":\"060f760c\",\"interview_ç®—æ³•01.md\":\"182a4137\",\"jiagou_monorepo.md\":\"51eb3439\",\"jiagou_ä»0åˆ°1æ„å»ºç¬¦åˆæ ‡å‡†çš„å…¬å…±åº“.md\":\"99849ee2\",\"jiagou_åˆ‡æ¢ä¸»é¢˜æ–¹æ¡ˆ.md\":\"501a1a5e\",\"jiagou_å‰ç«¯åŸºç¡€å»ºè®¾ä¸æ¶æ„30è®².md\":\"f7baf6ec\",\"jiagou_æ­å»ºç»„ä»¶åº“.md\":\"d9bc651d\",\"jiagou_æ·±å…¥babel.md\":\"9abe1423\",\"jiagou_è‡ªåŠ¨ç”ŸæˆæŒ‰éœ€å¯¼å‡ºç›®å½•.md\":\"5f601077\",\"jiagou_è¡¨å•ç»„ä»¶å¸¦æ ¡éªŒåŠŸèƒ½.md\":\"d794d549\",\"js_object.entries.md\":\"3ba00128\",\"js_classå’Œæ„é€ å‡½æ•°.md\":\"d5c78ad6\",\"js_dayformatæ­£åˆ™çš„ä½¿ç”¨.md\":\"8abaaa7f\",\"js_luhnç®—æ³•.md\":\"ffeffec6\",\"js_proxy.md\":\"a7b2ad3a\",\"js_ä¼˜é›…çš„class.md\":\"497ed7e9\",\"js_å‰ç«¯æ¨¡å—åŒ–.md\":\"ed11c518\",\"js_æµè§ˆå™¨åƒåœ¾å›æ”¶.md\":\"b6fa7d93\",\"js_æ·±å…¥babel.md\":\"92842df6\",\"js_é—­åŒ…ä¸åƒåœ¾å›æ”¶.md\":\"bd9a10f4\",\"microfrontend_ä»‹ç».md\":\"9ff9f87d\",\"microfrontend_æ‹Ÿå®šå¾®å‰ç«¯æ¶æ„è®¾è®¡.md\":\"fccf143e\",\"microfrontend_æ¶æ„æ€æƒ³.md\":\"748e5304\",\"node_cheetah-learn.md\":\"95e6fcd1\",\"node_cliç›¸å…³å­¦ä¹ .md\":\"c29bfdd7\",\"performance_serviceworker.md\":\"6f67fcf2\",\"performance_ssr.md\":\"0f412a14\",\"performance_æ…•è¯¾ç½‘webæ€§èƒ½ä¼˜åŒ–.md\":\"f53c24bc\",\"typescript_vue2åŠ ts.md\":\"9d17aaa6\",\"vue_create-vueè„šæ‰‹æ¶.md\":\"89f2fa24\",\"vue_esbuildä½¿ç”¨.md\":\"7977b135\",\"vue_keep-aliveåŸç†.md\":\"ef31ebc9\",\"vue_vue-routerå®ç°åŸç†.md\":\"6106cd66\",\"vue_æ¨¡æ¿ç¼–è¯‘.md\":\"50b03259\",\"vue_è·¯ç”±é¡µé¢å†å²æ ˆçš„å¤„ç†.md\":\"8b4132c2\",\"vue_é‡å­¦vue-01æ¨¡æ¿è¯­æ³•.md\":\"436fc3ef\",\"vue_é‡å­¦vue-02æ•°æ®é©±åŠ¨è§†å›¾.md\":\"d89737de\",\"vue_é‡å­¦vue-03renderå‡½æ•°.md\":\"1cc2f4a1\",\"vue_é‡å­¦vue-04å†…ç½®æŒ‡ä»¤.md\":\"59840a53\",\"vue_é‡å­¦vue-05filterå¤šä½™å—.md\":\"02057bf4\",\"vue_é‡å­¦vue-06computer.md\":\"10c8a4d4\",\"vue_é‡å­¦vue-07watch.md\":\"25d56e53\",\"vue_é‡å­¦vue-08ç»„ä»¶.md\":\"3d21f25c\",\"vue_é‡å­¦vue-09ç”Ÿå‘½å‘¨æœŸ.md\":\"786dacfb\",\"vue_é‡å­¦vue-10refæ˜¯ä»€ä¹ˆ.md\":\"a29dd7e6\",\"vue_é‡å­¦vue-11nexttick.md\":\"35043fa8\",\"vue_é‡å­¦vue-8ç»„ä»¶é€šä¿¡.md\":\"4845edc5\",\"vue_é‡å­¦vue-vue.use.md\":\"cc4266d2\",\"vue_é‡å­¦vue-åŠ¨ç”»å†…ç½®ç»„ä»¶.md\":\"04d4553c\",\"vue3_elementplus.md\":\"2f3aeef9\",\"vue3_å…¥é—¨.md\":\"33504c8d\",\"webcomponents_1. webcomponentä»‹ç».md\":\"29a6407a\",\"webcomponents_2. customelements.md\":\"9e1088a3\",\"webpack_1.md\":\"7279a63f\",\"webpack__è‰ç¨¿.md\":\"39f16499\",\"webpack_å®ç°ä¸€ä¸ªè‡ªå·±çš„è„šæ‰‹æ¶.md\":\"b4d5365f\",\"webpack_é‡å­¦webpack-01æ‰“åŒ…å·¥å…·çš„æ€è€ƒ.md\":\"083571d8\",\"webpack_é‡å­¦webpack-02æ¨¡å—åŒ–åŸç†.md\":\"0650e76f\",\"webpack_é‡å­¦webpack-03loader.md\":\"43789662\",\"webpack_é‡å­¦webpack-04plugin.md\":\"73454000\",\"webpack_é‡å­¦webpack-05hmrçƒ­æ›´æ–°.md\":\"007085b5\",\"week_202110-1.md\":\"ecb6af64\",\"week_202110-2.md\":\"59fce584\",\"week_202111-1.md\":\"7d3ac50a\",\"week__0todo.md\":\"d60b5fc0\",\"week_ç¼“å­˜å·¥å…·æ–¹æ³•æ€è·¯.md\":\"13a83606\",\"work_ioså°ç™½æ¡é—®é¢˜.md\":\"cf9e950f\"}")</script>
    <script type="module" async src="/assets/app.d95e124d.js"></script>
    
  </body>
</html>